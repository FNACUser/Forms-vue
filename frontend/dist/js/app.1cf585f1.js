(function(){var e={32:function(e,t,s){"use strict";var a=s(6369),i=function(){var e=this,t=e._self._c;return t("v-app",[e.mainStore.isLoggedIn?t("v-navigation-drawer",{attrs:{clipped:e.$vuetify.breakpoint.lgAndUp,app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[t("v-list",{attrs:{dense:""}},[e._l(e.menus,(function(s){return[s.children?t("v-list-group",{key:s.text,attrs:{"prepend-icon":s.icon,"append-icon":s["icon-alt"]},scopedSlots:e._u([{key:"activator",fn:function(){return[t("v-list-item-content",[t("v-list-item-title",[e._v(" "+e._s(s.text)+" ")])],1)]},proxy:!0}],null,!0)},e._l(s.children,(function(s,a){return t("v-list-item",{key:a,attrs:{to:{name:s.route}}},[s.icon?t("v-list-item-action",[t("v-icon",[e._v(e._s(s.icon))])],1):e._e(),t("v-list-item-content",[t("v-list-item-title",[e._v(" "+e._s(s.text)+" ")])],1)],1)})),1):t("v-list-item",{key:s.text,attrs:{to:{name:s.route}}},[t("v-list-item-action",[t("v-icon",[e._v(e._s(s.icon))])],1),t("v-list-item-content",[t("v-list-item-title",[e._v(" "+e._s(s.text)+" ")])],1)],1)]}))],2)],1):e._e(),t("v-app-bar",{attrs:{"clipped-left":e.$vuetify.breakpoint.lgAndUp,color:"primary",app:""}},[e.mainStore.isLoggedIn?t("v-app-bar-nav-icon",{staticStyle:{color:"white"},on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}):e._e(),t("v-spacer"),e.mainStore.isLoggedIn?t("v-toolbar-items",[t("LocaleSwitcher"),t("v-btn",{staticClass:"white--text",attrs:{text:""}},[e._v(e._s(e.mainStore.logged_user.name))]),t("v-btn",{staticStyle:{color:"white"},attrs:{icon:""},on:{click:e.mainStore.logout}},[t("v-icon",[e._v("mdi-logout")])],1)],1):t("v-toolbar-items",[t("LocaleSwitcher")],1)],1),t("header",[t("link",{attrs:{href:"https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900",rel:"stylesheet"}}),t("link",{attrs:{href:"https://cdn.jsdelivr.net/npm/@mdi/font@6.x/css/materialdesignicons.min.css",rel:"stylesheet"}})]),t("v-main",[t("flash-message",{staticStyle:{height:"8px","padding-top":"40px"}}),t("keep-alive",[t("router-view")],1),t("loader")],1),t("v-footer")],1)},r=[],o=s(3556),n=s(6265),l=s.n(n),c=s(1598),d=s(6018),u=s(8308),_=s(6808);function m(e){return e["en"]["$vuetify"]=u.Z,e["es"]["$vuetify"]=_.Z,e}function h(){const e=s(8092);let t={};return e.keys().forEach((s=>{const a=s.match(/([A-Za-z0-9-_]+)\./i);if(a&&a.length>1){const i=a[1];t[i]=e(s)}})),t=m(t),t}a["default"].use(d.Z);const p=new d.Z({locale:"es",fallbackLocale:"es",messages:h()}),w={id:"",name:"",email:"",role:""},f=(0,o.Q_)("main",{state:()=>({token:localStorage.getItem("access_token")||"",logged_user:w,employees:[],cycles:[],networks:[],areas:[],network_modes:[],culture_modes:[],loader:!1,flash_message:"",flash_message_type:"",selected_cycle:null}),getters:{isLoggedIn:e=>!!e.token,filteredCycles:e=>e.cycles.filter((e=>e.Is_active))},actions:{async initialize(){this.getAreas(),this.getEmployees(),this.getNetworks(),this.getCycles(),this.getCultureModes()},async logIn(e){await l().post("https://oahub.finacanalytics.com/api/v1/login",e).then((e=>{let t=e.data.token;localStorage.setItem("access_token",t),this.token=t,this.setLoggedUser(),this.initialize(),this.router.push("/active_source").catch((e=>{console.log(e)}))})).catch((e=>{console.log(e),this.$reset(),localStorage.removeItem("access_token"),this.setFlashMessage({message:e.response.data,type:"error"}),this.router.push("/login").catch((()=>{}))}))},logout(){this.$reset(),localStorage.removeItem("access_token"),this.logged_user=Object.assign({},w),this.token="",this.router.push("/login").catch((()=>{}))},setLoggedUser(){let e=(0,c.Z)(this.token);this.logged_user.id=e.id,this.logged_user.name=e.username,this.logged_user.email=e.email,this.logged_user.role=e.roles[0].name},async getNetworkModes(e){if(e){const t=await l().get("https://oahub.finacanalytics.com/api/v1/cycle/"+e+"/network_modes");this.network_modes=t.data}},async getEmployees(){const e=await l().get("https://oahub.finacanalytics.com/api/v1/users");this.employees=e.data},async getCycles(){const e=await l().get("https://oahub.finacanalytics.com/api/v1/cycles");this.cycles=e.data},async getNetworks(){const e=await l().get("https://oahub.finacanalytics.com/api/v1/networks/"+p.locale);this.networks=e.data},async getAreas(){const e=await l().get("https://oahub.finacanalytics.com/api/v1/areas");this.areas=e.data},async getCultureModes(){const e=await l().get("https://oahub.finacanalytics.com/api/v1/culture/modes");this.culture_modes=e.data},setFlashMessage(e){if(e.message){let t="";t=p.te(`${e.message}`)?p.t(`${e.message}`):e.message,this.flash_message=t,this.flash_message_type=e.type}else this.flash_message="",this.flash_message_type=null}}});var g=function(){var e=this,t=e._self._c;return t("v-menu",{attrs:{bottom:"",left:""},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:a}){return[t("v-btn",e._g(e._b({staticClass:"white--text",attrs:{icon:""}},"v-btn",a,!1),s),[t("v-icon",[e._v("mdi-web")]),e._v(e._s(e.$i18n.locale)+" ")],1)]}}])},[t("v-list",e._l(e.filteredLocales,(function(s){return t("v-list-item",{key:s},[t("v-list-item-title",{on:{click:function(t){return e.switchLocale(s)}}},[e._v(e._s(s.toUpperCase()))])],1)})),1)],1)},v=[],y={name:"LocaleSwitcher",data(){return{locales:"es,en".split(",")}},computed:{filteredLocales(){return this.locales.filter((e=>e!==this.$i18n.locale))}},methods:{switchLocale(e){this.$i18n.locale!==e&&(this.$i18n.locale=e)}}},k=y,$=s(1001),b=(0,$.Z)(k,g,v,!1,null,null,null),x=b.exports,S=function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-xs-center"},[t("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.loader,callback:function(t){e.loader=t},expression:"loader"}},[t("v-card",{attrs:{color:"primary",dark:""}},[t("v-card-text",[e._v(" "+e._s(e.$t("menus.loading"))+" "),t("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1)],1)},C=[],A={computed:{...(0,o.rn)(f,["loader"])}},q=A,N=(0,$.Z)(q,S,C,!1,null,null,null),j=N.exports,O=function(){var e=this,t=e._self._c;return t("div",[t("v-row",[t("v-col",{attrs:{md:"6","offset-md":"3"}},[e.flash_message?t("v-alert",{attrs:{type:e.flash_message_type,text:"",dismissible:""},on:{input:e.onClose}},[e._v(" "+e._s(e.flash_message)+" ")]):e._e()],1)],1)],1)},T=[],F={computed:{...(0,o.rn)(f,["flash_message","flash_message_type"])},watch:{flash_message(e){e&&setTimeout((()=>{this.setFlashMessage({})}),5e3)}},methods:{...(0,o.nv)(f,["setFlashMessage"]),onClose(){this.setFlashMessage({})}}},M=F,I=(0,$.Z)(M,O,T,!1,null,null,null),E=I.exports,L={data(){return{drawer:!0,menus:[{icon:"mdi-crowd",text:`${this.$t("menus.active_source")}`,route:"ActiveSource",roles:["Admin"]},{icon:"mdi-account-group",text:`${this.$t("menus.culture")}`,route:"Culture",roles:["Admin"]}]}},components:{LocaleSwitcher:x,Loader:j,flashMessage:E},created(){this.mainStore.isLoggedIn&&(this.mainStore.initialize(),this.mainStore.setLoggedUser()),this.$axios.interceptors.request.use((e=>(this.mainStore.loader=!0,e)),(e=>(this.mainStore.loader=!1,Promise.reject(e)))),this.$axios.interceptors.response.use((e=>(this.mainStore.loader=!1,e)),(e=>(this.mainStore.loader=!1,401==e.response.status&&(this.mainStore.$reset(),localStorage.removeItem("access_token"),this.mainStore.logged_user=Object.assign({},{id:"",name:"",email:"",role:""}),this.mainStore.token="",["login.invalid_token","login.missing_token"].includes(e.response.data.message)&&(this.mainStore.setFlashMessage({message:"login.invalid_or_expired_token",type:"error"}),this.$router.push("/login"))),Promise.reject(e))))},mounted(){},computed:{...(0,o.Kc)(f)},watch:{"$i18n.locale"(){this.translateMenus()}},methods:{translateMenus(){this.menus[0].text=this.$t("menus.active_source"),this.menus[1].text=this.$t("menus.culture")}}},P=L,Z=(0,$.Z)(P,i,r,!1,null,"5bd8ae7c",null),z=Z.exports,U=s(2631),B=function(){var e=this,t=e._self._c;return t("v-container",{attrs:{"fill-height":"",fluid:""}},[t("v-layout",{attrs:{"align-center":"","justify-center":""}},[t("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[t("v-card",{staticClass:"elevation-12"},[t("v-toolbar",{attrs:{dark:"",color:"primary"}},[t("v-toolbar-title",[e._v(e._s(e.$t("login.reset_password.title")))]),t("v-spacer")],1),t("v-card-text",[t("v-form",{model:{value:e.valid_form,callback:function(t){e.valid_form=t},expression:"valid_form"}},[t("v-text-field",{attrs:{"prepend-icon":"mdi-email",label:"Email",type:"text",rules:[t=>!!t||e.$t("login.email_required"),t=>/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(t)||e.$t("login.email_not_valid")]},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1)],1),t("v-card-actions",[t("v-spacer"),t("v-btn",{attrs:{disabled:e.sending_email},on:{click:e.cancel}},[e._v(e._s(e.$t("menus.cancel")))]),t("v-btn",{attrs:{color:"primary",disabled:e.isValidForm},on:{click:e.requestPasswordReset}},[e._v(e._s(e.$t("login.reset_password.send_request")))])],1)],1)],1)],1)],1)},H=[],V={data(){return{email:null,has_error:!1,valid_form:!1,sending_email:!1}},computed:{isValidForm(){return!this.valid_form||this.sending_email}},methods:{...(0,o.nv)(f,["setFlashMessage"]),cancel(){this.$router.push({path:"Login"})},requestPasswordReset(){this.sending_email=!0,this.$axios.post("https://oahub.finacanalytics.com/api/v1/request_password_reset",{email:this.email,lang:this.$i18n.locale}).then((e=>{this.sending_email=!1,this.setFlashMessage({message:e.data,type:"success"}),this.$router.replace("/")})).catch((e=>{this.sending_email=!1,this.setFlashMessage({message:e.response.data,type:"error"}),this.email=""}))}}},D=V,Q=(0,$.Z)(D,B,H,!1,null,null,null),R=Q.exports,W=function(){var e=this,t=e._self._c;return t("v-container",{attrs:{"fill-height":"",fluid:""}},[t("v-layout",{attrs:{"align-center":"","justify-center":""}},[t("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[t("v-card",{staticClass:"elevation-12"},[t("v-toolbar",{attrs:{dark:"",color:"primary"}},[t("v-toolbar-title",[e._v(e._s(e.$t("login.reset_password.change_pwd")))]),t("v-spacer")],1),t("v-card-text",[t("v-form",{model:{value:e.valid_form,callback:function(t){e.valid_form=t},expression:"valid_form"}},[t("v-text-field",{attrs:{"prepend-icon":"mdi-email",label:"Email",type:"text",disabled:"",rules:[e=>!!e||"E-mail es requerido!",e=>/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(e)||"E-mail no es válido"]},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),t("v-text-field",{attrs:{id:"password","prepend-icon":"mdi-lock",label:e.$t("login.new_password"),type:e.show_pwd?"text":"password","append-icon":e.show_pwd?"mdi-eye":"mdi-eye-off",rules:[t=>!!t||e.$t("login.pwd_required"),t=>/^\w(?=.{4,})/.test(t)||e.$t("login.min_pwd")]},on:{"click:append":function(t){e.show_pwd=!e.show_pwd}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),t("v-text-field",{attrs:{id:"confirmation_password","prepend-icon":"mdi-lock",label:e.$t("login.confirmation_password"),type:e.show_conf_pwd?"text":"password","append-icon":e.show_conf_pwd?"mdi-eye":"mdi-eye-off",rules:[t=>!!t||e.$t("login.pwd_required"),t=>/^\w(?=.{4,})/.test(t)||e.$t("login.min_pwd"),t=>t===this.password||e.$t("login.confirmation_pwd_not_match")]},on:{"click:append":function(t){e.show_conf_pwd=!e.show_conf_pwd}},model:{value:e.confirmation_password,callback:function(t){e.confirmation_password=t},expression:"confirmation_password"}})],1)],1),t("v-card-actions",[t("v-spacer"),t("v-btn",{on:{click:e.cancel}},[e._v(e._s(e.$t("menus.cancel")))]),t("v-btn",{attrs:{color:"primary",type:"submit",disabled:!e.valid_form},on:{click:e.resetPassword}},[e._v(e._s(e.$t("login.reset_password.change_pwd")))])],1)],1)],1)],1)],1)},G=[],J={data(){return{token:null,email:this.$route.params.email,password:null,confirmation_password:null,has_error:!1,show_pwd:!1,show_conf_pwd:!1,valid_form:!1}},methods:{...(0,o.nv)(f,["setFlashMessage"]),cancel(){this.$router.replace("/")},resetPassword(){this.$axios.post("https://oahub.finacanalytics.com/api/v1/reset_password",{token:this.$route.params.token,email:this.$route.params.email,password:this.password,confirmation_password:this.confirmation_password}).then((e=>{this.setFlashMessage({message:e.data,type:"success"}),this.$router.replace("/")})).catch((e=>{this.setFlashMessage({message:e.response.data,type:"error"})}))}}},K=J,X=(0,$.Z)(K,W,G,!1,null,null,null),Y=X.exports;a["default"].use(o.og);const ee=(0,o.WB)();var te=ee,se=function(){var e=this,t=e._self._c;return t("v-container",{staticClass:"px-10",attrs:{fluid:""}},[t("br"),t("v-row",[t("v-col",{staticClass:"d-flex justify-space-around mb-6 align-end",attrs:{cols:"2"}},[t("v-select",{attrs:{items:e.mainStore.filteredCycles,label:e.$t("globals.period"),"item-text":`Cycle_${e.$i18n.locale}`,"item-value":"id_cycle",clearable:"",dense:""},model:{value:e.mainStore.selected_cycle,callback:function(t){e.$set(e.mainStore,"selected_cycle",t)},expression:"mainStore.selected_cycle"}})],1),e.mainStore.selected_cycle?t("v-col",{staticClass:"d-flex justify-space-around mb-6 align-end",attrs:{cols:"2"}},[t("v-select",{attrs:{items:e.mainStore.networks,label:e.$t("active_source.questionaire_type"),"item-text":`name_${e.$i18n.locale}`,"item-value":"id",clearable:"","return-object":"",dense:""},on:{"click:clear":e.clearVariables,change:e.getQuestionsAndNodes},model:{value:e.selected_network,callback:function(t){e.selected_network=t},expression:"selected_network"}})],1):e._e(),e.filteredNetwokModeThemes?t("v-col",{staticClass:"d-flex justify-space-around mb-6 align-end",attrs:{cols:"3"}},[t("v-select",{attrs:{items:e.filteredNetwokModeThemes,label:e.$t("active_source.question_theme"),"item-text":`Network_mode_theme_${e.$i18n.locale}`,"item-value":"id_network_mode_theme",clearable:"",dense:""},on:{change:e.getQuestionsAndNodes,"click:clear":e.clearVariables},model:{value:e.selected_network_mode_theme,callback:function(t){e.selected_network_mode_theme=t},expression:"selected_network_mode_theme"}})],1):e._e(),e.selected_network&&"actor"===e.selected_network.code?t("v-col",{staticClass:"d-flex justify-space-around mb-6 align-end",attrs:{cols:"2"}},[t("v-autocomplete",{attrs:{items:e.mainStore.areas,label:e.$t("active_source.area"),"item-text":`Organization_area_${e.$i18n.locale}`,"item-value":"id_organization_area",clearable:"",dense:"",disabled:e.currentForm&&e.currentForm.is_concluded},model:{value:e.selected_area,callback:function(t){e.selected_area=t},expression:"selected_area"}})],1):e._e(),e.selected_network&&"actor"===e.selected_network.code?t("v-col",{staticClass:"d-flex justify-space-around mb-6 align-end",attrs:{cols:"3"}},[t("v-autocomplete",{attrs:{items:e.filteredEmployees,"item-text":"username","item-value":"id",label:e.$t("active_source.user"),"persistent-hint":"","small-chips":"",multiple:"","return-object":"",dense:"",disabled:e.currentForm&&e.currentForm.is_concluded},on:{change:function(t){return e.addInteractingActor()}},model:{value:e.selected_actors,callback:function(t){e.selected_actors=t},expression:"selected_actors"}})],1):e._e()],1),e.mainStore.network_modes.length?t("v-row",e._l(e.forms,(function(s,a){return t("v-col",{key:a,attrs:{cols:"2"}},[t("gauge",{attrs:{label:s[`name_${e.$i18n.locale}`],in_value:Math.round(100*s["answers"]/(s["total_questions"]*s["total_items"])),in_size:e.current_network_mode&&s.id==e.current_network_mode.id_network_mode?100:60,in_width:e.current_network_mode&&s.id==e.current_network_mode.id_network_mode?15:7},nativeOn:{click:function(t){return e.setSelectedNetworkAndTheme(s)}}})],1)})),1):e._e(),e.current_network_mode?t("v-row",[t("v-col",{attrs:{cols:"4"}},[e.currentForm?t("v-switch",{attrs:{label:`${e.$t("active_source.section_closed")}: ${e.getFormSectionName(this.current_network_mode,this.$i18n.locale)}`},on:{change:e.toggleOpenCloseCurrentForm},model:{value:e.currentForm.is_concluded,callback:function(t){e.$set(e.currentForm,"is_concluded",t)},expression:"currentForm.is_concluded"}}):e._e()],1)],1):e._e(),t("v-row",{attrs:{dense:"",justify:"space-around"}},[t("v-col",{attrs:{cols:"3"}},e._l(e.questions,(function(s,a){return t("div",{key:a},[t("v-card",[t("v-app-bar",{attrs:{flat:"",color:"blue"}},[t("v-card-title",{staticClass:"white--text"},[e._v(" "+e._s(e.$t("active_source.question"))+" "+e._s(a+1)+" ")])],1),t("v-card-text",[e._v(e._s(s[`Question_${e.$i18n.locale}`]))])],1),t("br")],1)})),0),e.selected_network&&"actor"===e.selected_network.code?t("v-col",{attrs:{cols:"8"}},[e.selected_actors.length>0?t("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.tableActorsHeader,items:e.selected_actors,"items-per-page":-1,dense:""},scopedSlots:e._u([{key:"item",fn:function({item:s}){return[t("tr",[t("td",{staticClass:"text-xs-left"},[e._v(e._s(s.username))]),t("td",{staticClass:"text-xs-left"},[e._v(e._s(s.organization_area[`Organization_area_${e.$i18n.locale}`]))]),e._l(e.questions,(function(a,i){return t("td",{key:i},[t("v-select",{staticClass:"my-5",attrs:{id:`sel_${e.current_network_mode.id_network_mode}_${a.id_question}_${s.id}`,items:JSON.parse(a.question_possible_answers[`Question_possible_answers_${e.$i18n.locale}`]),"item-text":"texto","item-value":"valor",clearable:"",multiple:a.question_possible_answers.multiple,"deletable-chips":"","small-chips":"",outlined:"",flat:"",rounded:"",dense:"",disabled:e.currentForm&&e.currentForm.is_concluded},on:{change:function(t){return e.saveAnswersArray(t,s.id,a.id_question)}},model:{value:e.answers[`${e.current_network_mode.id_network_mode}_${a.id_question}_${s.id}`],callback:function(t){e.$set(e.answers,`${e.current_network_mode.id_network_mode}_${a.id_question}_${s.id}`,t)},expression:"answers[`${current_network_mode.id_network_mode}_${question.id_question}_${item.id}`]"}})],1)})),t("td",[!e.selected_network_mode_theme||e.currentForm&&!e.currentForm.is_concluded?t("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t("v-icon",e._g({attrs:{small:"",color:"orange"},on:{click:function(t){return e.delRecord(s,"menus.delete_record_title","alerts.delete_interacting_person_text")}}},a),[e._v(" mdi-delete ")])]}}],null,!0)},[t("span",[e._v("Borrar")])]):e._e()],1)],2)]}}],null,!1,1032805950)}):e._e()],1):e._e(),e.selected_network&&"actor"!==e.selected_network.code?t("v-col",{attrs:{cols:"8"}},[e.nodes?t("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.tableNodesHeader,items:e.nodes,"items-per-page":-1,dense:""},scopedSlots:e._u([{key:"item",fn:function({item:s}){return[t("tr",[t("td",{staticClass:"text-xs-left"},[e._v(" "+e._s(s[`Node_${e.$i18n.locale}`])+" ")]),e._l(e.questions,(function(a,i){return t("td",{key:i},[t("v-select",{staticClass:"my-5",attrs:{id:`sel_${e.current_network_mode.id_network_mode}_${a.id_question}_${s.id_node}`,items:JSON.parse(a.question_possible_answers[`Question_possible_answers_${e.$i18n.locale}`]),"item-text":"texto","item-value":"valor",clearable:"",multiple:a.question_possible_answers.multiple,"deletable-chips":"","small-chips":"",outlined:"",flat:"",rounded:"",dense:"",disabled:e.currentForm&&e.currentForm.is_concluded},on:{change:function(t){return e.saveAnswersArray(t,s.id_node,a.id_question)}},model:{value:e.answers[`${e.current_network_mode.id_network_mode}_${a.id_question}_${s.id_node}`],callback:function(t){e.$set(e.answers,`${e.current_network_mode.id_network_mode}_${a.id_question}_${s.id_node}`,t)},expression:"answers[`${current_network_mode.id_network_mode}_${question.id_question}_${item.id_node}`]"}})],1)}))],2)]}}],null,!1,2820041157)}):e._e()],1):e._e()],1),t("confirmation-dialog",{ref:"confirmDeleteActor"})],1)},ae=[],ie=function(){var e=this,t=e._self._c;return t("v-dialog",{style:{zIndex:e.options.zIndex},attrs:{"max-width":e.options.width},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.cancel.apply(null,arguments)}},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t("v-card",[t("v-toolbar",{attrs:{dark:"",color:e.options.color,dense:"",flat:""}},[t("v-toolbar-title",{staticClass:"text-body-2 font-weight-bold black--text"},[e._v(" "+e._s(e.title)+" ")])],1),t("v-card-text",{directives:[{name:"show",rawName:"v-show",value:!!e.message,expression:"!!message"}],staticClass:"pa-4 black--text",domProps:{innerHTML:e._s(e.message)}}),t("v-card-actions",{staticClass:"pt-3"},[t("v-spacer"),e.options.noconfirm?e._e():t("v-btn",{staticClass:"body-2 font-weight-bold",attrs:{color:"grey",text:""},nativeOn:{click:function(t){return e.cancel.apply(null,arguments)}}},[e._v(e._s(e.$t("menus.cancel")))]),t("v-btn",{staticClass:"body-2 font-weight-bold",attrs:{color:"primary",outlined:""},nativeOn:{click:function(t){return e.agree.apply(null,arguments)}}},[e._v("OK")])],1)],1)],1)},re=[],oe={name:"ConfirmDlg",data(){return{dialog:!1,resolve:null,reject:null,message:null,title:null,options:{color:"grey lighten-3",width:400,zIndex:200,noconfirm:!1}}},methods:{open(e,t,s){return this.dialog=!0,this.title=e,this.message=t,this.options=Object.assign(this.options,s),new Promise(((e,t)=>{this.resolve=e,this.reject=t}))},agree(){this.resolve(!0),this.dialog=!1},cancel(){this.resolve(!1),this.dialog=!1}}},ne=oe,le=(0,$.Z)(ne,ie,re,!1,null,null,null),ce=le.exports,de=function(){var e=this,t=e._self._c;return t("div",[t("v-progress-circular",{staticClass:"pointer",attrs:{rotate:e.rotate,size:e.size,width:e.width,color:e.color,value:e.value}},[e._v(" "+e._s(e.value)+" % ")]),t("div",[t("v-chip",{attrs:{"x-small":""}},[t("strong",[e._v(e._s(e.label))])])],1)],1)},ue=[],_e=s(2638),me={props:["in_rotate","in_size","in_width","in_color","in_value","label","actionItem"],data(){return{interval:{},value:this.in_value??0,rotate:this.in_rotate??-90,size:this.in_size??70,width:this.in_width??"7"}},mounted(){},computed:{color(){let e=_e.Z.red.base;switch(!0){case this.value<=10:e=_e.Z.red.base;break;case this.value<=20:e=_e.Z.deepOrange.darken1;break;case this.value<=30:e=_e.Z.orange.accent4;break;case this.value<=40:e=_e.Z.amber.base;break;case this.value<=50:e=_e.Z.yellow.darken1;break;case this.value<=60:e=_e.Z.lime.base;break;case this.value<=70:e=_e.Z.lime.darken2;break;case this.value<=80:e=_e.Z.lime.darken4;break;case this.value<=90:e=_e.Z.lightGreen.darken1;break;case this.value<100:e=_e.Z.green.darken2;break;case 100==this.value:e=_e.Z.indigo.darken4;break;default:e=_e.Z.red.base}return e}},watch:{in_value(e){e>=0&&(this.value=e)},in_size(e){e>=0&&(this.size=e)},in_width(e){e>=0&&(this.width=e)}}},he=me,pe=(0,$.Z)(he,de,ue,!1,null,null,null),we=pe.exports,fe={components:{ConfirmationDialog:ce,Gauge:we},data(){return{selected_actors:[],selected_network:null,selected_area:null,selected_node_segment_category:null,selected_network_mode_theme:null,questions:[],answers:{},nodes:[],current_network_mode:null,formClosed:!1,adjacency_input_forms:[],forms:[],selRules:[e=>e&&e.length<=2||"Máximo 2 opciones!! ${v.length}"],defaultActorsHeader:[{text:"Nombre",align:"start",value:"username",class:"white--text"},{text:"Area",value:"id_organization_area",class:"white--text"},{text:"Acciones",class:"white--text",sortable:!1}],defaultNodesHeader:[{text:"Nombre",align:"start",value:"name",class:"white--text"}]}},mounted(){this.initialize()},watch:{selected_cycle(e){null==e?this.resetSelectedVariables():this.initialize()}},computed:{...(0,o.rn)(f,["selected_cycle"]),...(0,o.Kc)(f),current_adjacency_input_form_id(){let e=null;return this.current_network_mode&&this.mainStore.selected_cycle&&this.mainStore.logged_user&&(e=`${this.mainStore.selected_cycle}-${this.mainStore.logged_user.id}-${this.current_network_mode.id_network_mode}`),e},currentForm(){if(this.forms.length&&this.current_adjacency_input_form_id){const e=this.forms.filter((e=>e.id_adjacency_input_form==this.current_adjacency_input_form_id));if(e.length)return e[0]}return null},interactingPeopleIds(){return this.selected_actors?this.selected_actors.map((e=>e.id)):[]},filteredEmployees(){return this.selected_area?this.mainStore.employees.filter((e=>e.id_organization_area===this.selected_area)):null},filteredNetwokModeThemes(){if(this.selected_network){let e=this.mainStore.network_modes.filter((e=>e.id_network===this.selected_network.id&&e.network_mode_theme));return e&&e.length?e.map((e=>e.network_mode_theme)):null}return null},tableActorsHeader(){return this.makeActorsTableHeader(this.questions,this.defaultActorsHeader,this.$t("active_source.question"))},tableNodesHeader(){return this.makeNodesTableHeader(this.questions,this.defaultNodesHeader,this.$t("active_source.question"))}},methods:{setSelectedNetworkAndTheme(e){this.selected_network=e.network_mode.network,"actor"==this.selected_network.code?this.selected_network_mode_theme=e.network_mode.network_mode_theme.id_network_mode_theme:this.selected_network_mode_theme=null,this.getQuestionsAndNodes()},getFormSectionName(e,t){return e&&e.network?e.network_mode_theme?e.network[`name_${t}`]+"-"+e.network_mode_theme[`Network_mode_theme_${t}`]:e.network[`name_${t}`]:""},saveAnswersArray(e,t,s){this.answers[`${this.current_network_mode.id_network_mode}_${s}_${t}`]?this.answers[`${this.current_network_mode.id_network_mode}_${s}_${t}`]=e:this.$set(this.answers,`${this.current_network_mode.id_network_mode}_${s}_${t}`,e);const a={cycle_id:this.mainStore.selected_cycle,user_email:this.mainStore.logged_user.email,item_id:t,question_id:s,network_mode_id:this.current_network_mode.id_network_mode,selected_option:e};this.$axios.post("https://oahub.finacanalytics.com/api/v1/save_answer",a).then((async e=>{this.$alertify.success(this.$t(e.data.message)),this.populateAnswers(e.data.responses),this.updateNetworkModeGauge(this.current_network_mode)})).catch((e=>{this.$alertify.error(this.$t(e.message)),console.error("There was an error!",e.message),console.error(e)}))},updateNetworkModeGauge(e){const t=this.forms.findIndex((t=>t.id==e.id_network_mode)),s=e.id_network_mode+"_",a=Object.keys(this.answers).filter((e=>e.startsWith(s))).length;this.forms[t]["answers"]=a,"actor"==e.network.code&&(this.forms[t]["total_items"]=this.selected_actors.length>0?this.selected_actors.length:1)},updateAllNetworkModeGauges(){this.mainStore.network_modes.forEach((e=>this.updateNetworkModeGauge(e)))},makeActorsTableHeader(e,t,s){let a=Object.assign([],t);return e&&e.length>0&&e.forEach(((e,t)=>{a.splice(2+t,0,{text:`${s} ${t+1}`,align:"center",class:"white--text",sortable:!1})})),a[0].text=this.$t("active_source.actor_table.name"),a[1].text=this.$t("active_source.actor_table.area"),a[a.length-1].text=this.$t("active_source.actor_table.actions"),a},makeNodesTableHeader(e,t,s){let a=Object.assign([],t);return e&&e.length>0&&e.forEach(((e,t)=>{a.splice(1+t,0,{text:`${s} ${t+1}`,align:"center",class:"white--text",sortable:!1})})),a[0].text=this.selected_network[`name_${this.$i18n.locale}`],a},sortSelectedColleagues(){this.selected_actors.sort(((e,t)=>e.username.toLowerCase()<t.username.toLowerCase()?-1:t.username.toLowerCase()>e.username.toLowerCase()?1:0))},async toggleOpenCloseCurrentForm(){const e={closed:this.currentForm.is_concluded,id_adjacency_input_form:this.currentForm.id_adjacency_input_form,user:JSON.stringify(this.mainStore.logged_user)};await this.$axios.post("https://oahub.finacanalytics.com/api/v1/open_close_adjacency_input_form",e).then((e=>{this.$alertify.success(this.$t(e.data))})).catch((e=>{console.error("There was an error!",e.message)}))},async addInteractingActor(){const e={user_email:this.mainStore.logged_user.email,employee_ids:this.interactingPeopleIds,cycle_id:this.mainStore.selected_cycle};await this.$axios.post("https://oahub.finacanalytics.com/api/v1/add_interacting_actor",e).then((e=>{this.$alertify.success(this.$t(e.data)),this.updateAllNetworkModeGauges()})).catch((e=>{console.error("There was an error!",e.message)})),this.sortSelectedColleagues()},async delRecord(e,t,s){await this.$refs.confirmDeleteActor.open(this.$t(t),this.$t(s),{color:"red lighten-3"})&&await this.deleteActor(e)},async deleteActor(e){const t=this.selected_actors.findIndex((t=>t.id==e.id)),s={user_email:this.mainStore.logged_user.email,item_id:e.id,cycle_id:this.mainStore.selected_cycle};await this.$axios.delete("https://oahub.finacanalytics.com/api/v1/delete_interacting_actor",{data:s}).then((async e=>{this.$alertify.success(this.$t(e.data)),this.selected_actors.splice(t,1),await this.getUserResponses(),this.updateAllNetworkModeGauges()})).catch((e=>{console.error("There was an error!",e.message)}))},resetSelectedVariables(){this.selected_area=null,this.mainStore.selected_cycle=null,this.selected_actors=null,this.selected_network=null,this.selected_node_segment_category=null,this.selected_network_mode_theme=null,this.questions=[],this.nodes=[],this.current_network_mode=null,this.answers=[],this.mainStore.network_modes=[],this.forms=[]},clearVariables(){this.questions=[],this.selected_network_mode_theme=null,this.current_network_mode=null,this.nodes=[]},async getNodes(e){if(e){const t=await this.$axios.get("https://oahub.finacanalytics.com/api/v1/network_mode/"+e+"/nodes");this.nodes=t.data}},async getActors(){await this.$axios.get("https://oahub.finacanalytics.com/api/v1/user/"+this.mainStore.logged_user.id+"/cycle/"+this.mainStore.selected_cycle+"/interacting_actors").then((e=>{const t=e.data;this.selected_actors=this.mainStore.employees.filter((e=>t.includes(e.id)))})).catch((e=>{console.error("There was an error!",e.message)}))},async getUserResponses(){await this.$axios.get("https://oahub.finacanalytics.com/api/v1/user/"+this.mainStore.logged_user.id+"/cycle/"+this.mainStore.selected_cycle+"/responses").then((e=>{const t=e.data;this.extractAjacencyInputForms(t),this.populateAnswers(t)})).catch((e=>{console.error("There was an error!",e.message)}))},async getUserAdjancencyInputForms(){await this.$axios.get("https://oahub.finacanalytics.com/api/v1/user/"+this.mainStore.logged_user.id+"/cycle/"+this.mainStore.selected_cycle+"/adjacency_input_forms").then((e=>{this.adjacency_input_forms=e.data})).catch((e=>{console.error("There was an error!",e.message)}))},extractAjacencyInputForms(e){if(this.adjacency_input_forms=[],e.length>0){const t=[...new Map(e.map((e=>[e.id_adjacency_input_form,e.adjacency_input_form]))).values()];this.adjacency_input_forms=t}},populateAnswers(e){e.length&&(this.answers={},e.forEach((e=>{const t=JSON.parse(e.Response);t.forEach((t=>{this.$set(this.answers,`${e.adjacency_input_form["id_network_mode"]}_${e.id_question}_${t.item_id}`,t.valor)}))})))},async getNetworkModeQuestions(e){if(e){const t=await this.$axios.get("https://oahub.finacanalytics.com/api/v1/network_mode/"+e+"/questions");return t.data}},async getQuestions(){this.questions=[],this.current_network_mode=[],this.selected_network&&this.filteredNetwokModeThemes?this.selected_network_mode_theme&&(this.current_network_mode=this.mainStore.network_modes.filter((e=>e.id_network===this.selected_network.id&&e.id_network_mode_theme===this.selected_network_mode_theme))[0]):this.selected_network&&null===this.filteredNetwokModeThemes&&(this.current_network_mode=this.mainStore.network_modes.filter((e=>e.id_network===this.selected_network.id))[0]),this.current_network_mode&&(this.questions=await this.getNetworkModeQuestions(this.current_network_mode.id_network_mode))},async getQuestionsAndNodes(){await this.getQuestions(),await this.getNodes(this.current_network_mode.id_network_mode)},async createFormsDetails(){this.mainStore.network_modes.length&&(this.forms=[],this.mainStore.network_modes.forEach((async e=>{let t={};t["network_mode"]=e,t["id"]=e.id_network_mode,t["name_es"]=this.getFormSectionName(e,"es"),t["name_en"]=this.getFormSectionName(e,"en");const s=await this.getNetworkModeQuestions(e.id_network_mode);t["total_questions"]=s.length,"actor"!==e.network.code?(await this.getNodes(e.id_network_mode),t["total_items"]=this.nodes.length):t["total_items"]=this.selected_actors.length>0?this.selected_actors.length:1;const a=e.id_network_mode+"_",i=Object.keys(this.answers).filter((e=>e.startsWith(a))).length;t["answers"]=i;const r=this.adjacency_input_forms.filter((t=>t.id_network_mode==e.id_network_mode))[0];t["id_adjacency_input_form"]=r?r.id_adjacency_input_form:`${this.mainStore.selected_cycle}-${this.mainStore.logged_user.id}-${e.id_network_mode}`,t["is_concluded"]=!!r&&r.Is_concluded,this.forms.push(t)})))},async initialize(){this.mainStore.selected_cycle&&(await this.getActors(),await this.mainStore.getNetworkModes(this.mainStore.selected_cycle),await this.getUserResponses(),await this.createFormsDetails())}}},ge=fe,ve=(0,$.Z)(ge,se,ae,!1,null,null,null),ye=ve.exports,ke=function(){var e=this,t=e._self._c;return t("v-container",{staticClass:"px-10",attrs:{fluid:""}},[t("br"),t("v-row",[t("v-col",{staticClass:"d-flex justify-space-around mb-6 align-end",attrs:{cols:"2"}},[t("v-select",{attrs:{items:e.filteredCycles,label:e.$t("globals.period"),"item-text":`Cycle_${e.$i18n.locale}`,"item-value":"id_cycle",clearable:"",dense:""},model:{value:e.selected_cycle,callback:function(t){e.selected_cycle=t},expression:"selected_cycle"}})],1),e.selected_cycle?t("v-col",{staticClass:"d-flex justify-space-around mb-6 align-end",attrs:{cols:"3"}},[t("v-select",{attrs:{items:e.themes,label:e.$t("culture.themes"),"item-text":`Culture_mode_theme_${e.$i18n.locale}`,"item-value":"id","return-object":"",clearable:"",dense:""},on:{change:e.getThemeQuestions},model:{value:e.selected_theme,callback:function(t){e.selected_theme=t},expression:"selected_theme"}})],1):e._e()],1),e.selected_cycle&&e.themes.length&&Object.keys(e.totals).length?t("v-row",e._l(e.themes,(function(s,a){return t("v-col",{key:a,attrs:{cols:"2"}},[t("progress-bars",{attrs:{name:s?s[`Culture_mode_theme_${e.$i18n.locale}`]:"",now:s?e.totals[`${e.selected_cycle}_${s.id}`]["now"]:0,preferred:s?e.totals[`${e.selected_cycle}_${s.id}`]["preferred"]:0,"is-selected":e.selected_theme&&s.id==e.selected_theme.id},nativeOn:{click:function(t){return e.setSelectedTheme(s)}}})],1)})),1):e._e(),t("v-row",[t("v-col",[e.selected_theme?t("v-card",[t("v-toolbar",{attrs:{color:"primary",dark:""}},[t("v-toolbar-title",[t("h3",[e._v(e._s(e.selected_theme[`Questions_prefix_${e.$i18n.locale}`]))])]),t("v-spacer")],1),t("v-data-table",{attrs:{headers:e.headers,items:e.questions,"hide-default-header":"","hide-default-footer":"",dense:""},scopedSlots:e._u([{key:"body.prepend",fn:function(){return[t("tr",[t("td"),t("td",{attrs:{width:"150px"}},[t("div",{staticClass:"d-flex align-center justify-center"},[t("h3",[e._v(e._s(e.$t("culture.now")))])])]),t("td",{attrs:{width:"150px"}},[t("div",{staticClass:"d-flex align-center justify-center"},[t("h3",[e._v(e._s(e.$t("culture.preferred")))])])])])]},proxy:!0},{key:"item",fn:function({item:s}){return[t("tr",[t("td",[t("h3",[e._v(e._s(s[`Culture_mode_theme_question_${e.$i18n.locale}`]))])]),t("td",{attrs:{width:"150px"}},[t("div",{staticClass:"d-flex align-center"},[e.answers[`${e.selected_cycle}_${e.selected_theme.id}_${s.id}`]?t("vuetify-money",{staticClass:"centered-input text--darken-3 mt-8",attrs:{options:e.integerOptions,solo:"",errorMessages:parseInt(e.answers[`${e.selected_cycle}_${e.selected_theme.id}_${s.id}`]["now"])>100?`${e.$t("alerts.limit_value_is")} ${e.integerOptions.max} !`:""},model:{value:e.answers[`${e.selected_cycle}_${e.selected_theme.id}_${s.id}`]["now"],callback:function(t){e.$set(e.answers[`${e.selected_cycle}_${e.selected_theme.id}_${s.id}`],"now",t)},expression:"answers[`${selected_cycle}_${selected_theme.id}_${item.id}`]['now']"}}):e._e()],1)]),t("td",{attrs:{width:"150px"}},[t("div",{staticClass:"d-flex align-center"},[e.answers[`${e.selected_cycle}_${e.selected_theme.id}_${s.id}`]?t("vuetify-money",{staticClass:"centered-input text--darken-3 mt-8",attrs:{options:e.integerOptions,solo:"",errorMessages:parseInt(e.answers[`${e.selected_cycle}_${e.selected_theme.id}_${s.id}`]["preferred"])>100?`${e.$t("alerts.limit_value_is")} ${e.integerOptions.max} !`:""},model:{value:e.answers[`${e.selected_cycle}_${e.selected_theme.id}_${s.id}`]["preferred"],callback:function(t){e.$set(e.answers[`${e.selected_cycle}_${e.selected_theme.id}_${s.id}`],"preferred",t)},expression:"answers[`${selected_cycle}_${selected_theme.id}_${item.id}`]['preferred']"}}):e._e()],1)])])]}},{key:"body.append",fn:function(){return[t("tr",[t("td",[t("div",{staticClass:"d-flex justify-end align-center"},[t("h2",[e._v("TOTAL")])])]),t("td",{attrs:{width:"150px"}},[t("div",{staticClass:"d-flex justify-center align-center"},[t("h2",[e._v(e._s(e.total_sums["now"]))])]),e.total_sums["now"]>100?t("span",{staticStyle:{color:"red"}},[e._v(e._s(e.$t("alerts.sum_limit")))]):e._e()]),t("td",{attrs:{width:"150px"}},[t("div",{staticClass:"d-flex justify-center align-center"},[t("h2",[e._v(e._s(e.total_sums["preferred"]))])]),e.total_sums["preferred"]>100?t("span",{staticStyle:{color:"red"}},[e._v(e._s(e.$t("alerts.sum_limit")))]):e._e()])])]},proxy:!0}],null,!1,956628182)})],1):e._e()],1)],1)],1)},$e=[],be={data:()=>({persistentHint:!0,percentPrecision:1,percentSeparator:{decimalSeparator:","},integerOptions:{locale:"es-CO",prefix:"",suffix:"",length:3,precision:0,valueWhenIsEmpty:0,min:0,max:100}})},xe=function(){var e=this,t=e._self._c;return t("div",[t("v-progress-linear",{staticClass:"pointer",class:100!=e.now?"red--text":e.isSelected?"white--text":"black--text",attrs:{color:e.isSelected?"light-blue darken-4":"light-blue",height:e.isSelected?30:18,value:e.now,striped:""}},[t("strong",[e._v(e._s(e.now))])]),t("br"),t("v-progress-linear",{staticClass:"pointer",class:100!=e.preferred?"red--text":e.isSelected?"white--text":"black--text",attrs:{color:e.isSelected?"light-green darken-4":"light-green",height:e.isSelected?30:18,value:e.preferred,striped:""}},[t("strong",[e._v(e._s(e.preferred))])]),e.isSelected?t("strong",[e._v(e._s(e.name))]):t("div",[e._v(" "+e._s(e.name)+" ")])],1)},Se=[],Ce={props:["name","now","preferred","isSelected"]},Ae=Ce,qe=(0,$.Z)(Ae,xe,Se,!1,null,null,null),Ne=qe.exports,je={components:{ProgressBars:Ne},mixins:[be],data(){return{selected_mode:1,selected_theme:null,questions:[],themes:[],answers:{},totals:{},headers:[{text:"",align:"start",value:"Pregunta"},{text:"Ahora",value:"",align:"center",width:"50px"},{text:"Preferido",value:"",align:"center",width:"50px"}]}},mounted(){this.initialize()},watch:{total_sums:{handler(e){e&&(e["now"]||e["preferred"])&&(100!=e["now"]||100!=e["preferred"]||e["now"]==this.totals[`${this.selected_cycle}_${this.selected_theme.id}`]["now"]&&e["preferred"]==this.totals[`${this.selected_cycle}_${this.selected_theme.id}`]["preferred"]||this.saveCultureAnswers(),this.totals[`${this.selected_cycle}_${this.selected_theme.id}`]?this.totals[`${this.selected_cycle}_${this.selected_theme.id}`]=Object.assign({},e):this.$set(this.totals,`${this.selected_cycle}_${this.selected_theme.id}`,e))}},selected_cycle(e){null==e?this.resetSelectedVariables():this.initialize()}},computed:{...(0,o.Ah)(f,["selected_cycle"]),...(0,o.rn)(f,["logged_user","filteredCycles"]),total_sums(){let e={now:0,preferred:0};return this.questions&&this.answers&&this.questions.forEach((t=>{this.selected_cycle&&this.selected_theme&&this.answers[`${this.selected_cycle}_${this.selected_theme.id}_${t.id}`]&&(e["now"]+=Number.parseInt(this.answers[`${this.selected_cycle}_${this.selected_theme.id}_${t.id}`]["now"]),e["preferred"]+=Number.parseInt(this.answers[`${this.selected_cycle}_${this.selected_theme.id}_${t.id}`]["preferred"]))})),e}},methods:{initTotals(){this.themes.forEach((e=>{this.totals[`${this.selected_cycle}_${e.id}`]||this.$set(this.totals,`${this.selected_cycle}_${e.id}`,{now:0,preferred:0})})),this.getUserModeThemesTotals(this.logged_user.id,this.selected_cycle,this.selected_mode)},saveCultureAnswers(){let e=[];this.questions.forEach((t=>{const s={question_id:t.id,now:this.answers[`${this.selected_cycle}_${this.selected_theme.id}_${t.id}`]["now"],preferred:this.answers[`${this.selected_cycle}_${this.selected_theme.id}_${t.id}`]["preferred"]};e.push(s)}));const t={cycle_id:this.selected_cycle,mode_id:this.selected_mode,theme_id:this.selected_theme.id,answers:e,user_email:this.logged_user.email};this.$axios.post("https://oahub.finacanalytics.com/api/v1/culture/save_answers",t).then((async e=>{this.$alertify.success(this.$t(e.data.message))})).catch((e=>{this.$alertify.error(this.$t(e.message)),console.error("There was an error!",e.message),console.error(e)}))},setSelectedTheme(e){this.selected_theme=e,this.getThemeQuestions()},resetSelectedVariables(){this.questions=[],this.themes=[],this.selected_theme=null},async initialize(){this.selected_cycle&&(await this.getModeThemes(),this.initTotals())},async getModeThemes(){const e=await this.$axios.get("https://oahub.finacanalytics.com/api/v1/culture/mode/"+this.selected_mode+"/themes");this.themes=e.data},async getThemeQuestions(){if(this.selected_theme){const e=await this.$axios.get("https://oahub.finacanalytics.com/api/v1/culture/theme/"+this.selected_theme.id+"/questions");this.questions=e.data,this.setReactivityInAnswersAndTotalsObjects(this.selected_cycle,this.selected_theme.id,this.questions),this.getUserModeThemeAnswers(this.logged_user.id,this.selected_cycle,this.selected_mode,this.selected_theme.id)}},async getUserModeThemeAnswers(e,t,s,a){e&&t&&s&&a&&this.$axios.get("https://oahub.finacanalytics.com/api/v1/culture/user/"+e+"/cycle/"+t+"/mode/"+s+"/theme/"+a+"/answers").then((async e=>{e.data.length?this.initAnswersArrayWithExistingValues(t,a,e.data):this.$alertify.warning(this.$t(e.data.message))})).catch((e=>{this.$alertify.error(this.$t(e.message))}))},initAnswersArrayWithExistingValues(e,t,s){s.forEach((s=>{this.answers[`${e}_${t}_${s["id_culture_mode_theme_question"]}`]["now"]=s["Actual"],this.answers[`${e}_${t}_${s["id_culture_mode_theme_question"]}`]["preferred"]=s["Preferred"]}))},setReactivityInAnswersAndTotalsObjects(e,t,s){s.forEach((s=>{this.answers[`${e}_${t}_${s.id}`]||this.$set(this.answers,`${e}_${t}_${s.id}`,{now:0,preferred:0})})),this.totals[`${e}_${t}`]||this.$set(this.totals,`${e}_${t}`,{now:0,preferred:0})},async getUserModeThemesTotals(e,t,s){if(e&&t&&s){const a=await this.$axios.get("https://oahub.finacanalytics.com/api/v1/culture/user/"+e+"/cycle/"+t+"/mode/"+s+"/themes_totals");a.data.length&&this.initTotalsArrayWithExistingValues(t,a.data)}},initTotalsArrayWithExistingValues(e,t){t.forEach((t=>{this.totals[`${e}_${t["id_culture_mode_theme"]}`]["now"]=t["Total_actual"],this.totals[`${e}_${t["id_culture_mode_theme"]}`]["preferred"]=t["Total_preferred"]}))}}},Oe=je,Te=(0,$.Z)(Oe,ke,$e,!1,null,"469247d2",null),Fe=Te.exports,Me=function(){var e=this,t=e._self._c;return t("v-container",{attrs:{"fill-height":"",fluid:""}},[t("v-layout",{attrs:{"align-center":"","justify-center":""}},[t("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[t("v-card",{staticClass:"elevation-12"},[t("v-img",{attrs:{height:"250px",src:"images/OA-HUB-cropped.png"}},[t("v-app-bar",{attrs:{flat:"",color:"rgba(0, 0, 0, 0)"}})],1),t("v-card-text",[t("v-form",{model:{value:e.valid_form,callback:function(t){e.valid_form=t},expression:"valid_form"}},[t("v-text-field",{attrs:{"prepend-icon":"mdi-email",label:"Email",type:"text",rules:[t=>!!t||e.$t("login.email_required"),t=>/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(t)||e.$t("login.email_not_valid")]},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),t("v-text-field",{attrs:{id:"password","prepend-icon":"mdi-lock",label:e.$t("login.password"),type:e.show?"text":"password","append-icon":e.show?"mdi-eye":"mdi-eye-off",rules:[t=>!!t||e.$t("login.pwd_required"),t=>/^\w(?=.{4,})/.test(t)||e.$t("login.min_pwd")]},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.logIn.apply(null,arguments)},"click:append":function(t){e.show=!e.show}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),t("router-link",{attrs:{to:"forgot-password"}},[e._v(e._s(e.$t("login.forgot_pwd")))])],1)],1),t("v-card-actions",[t("v-spacer"),t("v-btn",{attrs:{color:"primary",disabled:!e.valid_form},on:{click:e.logIn}},[e._v("Login")])],1)],1)],1)],1)],1)},Ie=[],Ee={data(){return{email:null,password:null,show:!1,valid_form:!1}},computed:{...(0,o.Kc)(f)},methods:{async logIn(){let e={email:this.email,password:this.password};this.mainStore.logIn(e)}}},Le=Ee,Pe=(0,$.Z)(Le,Me,Ie,!1,null,null,null),Ze=Pe.exports;const ze=(e,t,s)=>{const a=f(te);a.isLoggedIn?s("/login"):s()},Ue=(e,t,s)=>{const a=f(te);a.isLoggedIn?s():"/login"!==Be.path&&s("/login")};a["default"].use(U.ZP);const Be=new U.ZP({mode:"history",routes:[{path:"/",redirect:"/login"},{path:"/login",name:"Login",component:Ze,beforeEnter:ze},{path:"/forgot-password",name:"forgot-password",component:R,meta:{auth:!1}},{path:"/reset-password/:email/:token",name:"reset-password-form",component:Y,meta:{auth:!1}},{path:"/active_source",name:"ActiveSource",component:ye,beforeEnter:Ue},{path:"/culture",name:"Culture",component:Fe,beforeEnter:Ue}]});Be.beforeEach(((e,t,s)=>{e.matched.some((e=>e.meta.requiresAuth))&&("undefined"==typeof localStorage.getItem("access_token")||null==localStorage.getItem("access_token"))?s({path:"/login",query:{redirect:e.fullPath}}):s()}));var He=Be,Ve=s(707),De=s.n(Ve),Qe=(s(8556),s(2344)),Re=s(4023),We=s.n(Re),Ge=function(){var e=this,t=e._self._c;return t("div",[t("v-text-field",e._b({attrs:{label:e.label,placeholder:e.placeholder,readonly:e.readonly,disabled:e.disabled,outlined:e.outlined,dense:e.dense,"hide-details":e.hideDetails,error:e.error,"error-messages":e.errorMessages,rules:e.rules,clearable:e.clearable,backgroundColor:e.backgroundColor,prefix:e.options.prefix,suffix:e.options.suffix,hint:e.hint,"persistent-hint":e.persistentHint,solo:e.solo},on:{keypress:e.keyPress,blur:e.onBlur},model:{value:e.cmpValue,callback:function(t){e.cmpValue=t},expression:"cmpValue"}},"v-text-field",e.properties,!1))],1)},Je=[],Ke={model:{prop:"value",event:"input"},props:{value:{type:[String,Number],default:"0"},label:{type:String,default:""},placeholder:{type:String,default:void 0},readonly:{type:Boolean,default:!1},dense:{type:Boolean,default:!1},error:{type:Boolean,default:!1},hideDetails:{type:[Boolean,String],default:!1},errorMessages:{type:[Array,String],default:()=>[]},rules:{type:[Array,String],default:()=>[]},hint:{type:String,default:""},persistentHint:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},backgroundColor:{type:String,default:"white"},valueWhenIsEmpty:{type:String,default:""},valueOptions:{type:Object,default:function(){return{min:0,minEvent:"SetValueMin"}}},options:{type:Object,default:function(){return{locale:"pt-BR",prefix:"",suffix:"",length:11,precision:2}}},properties:{type:Object,default:function(){return{}}},solo:{type:Boolean,default:!1}},data:()=>({}),computed:{cmpValue:{get:function(){return null!==this.value&&""!==this.value?this.humanFormat(this.value.toString()):this.valueWhenIsEmpty},set:function(e){this.$emit("input",this.machineFormat(e))}}},methods:{humanFormat:function(e){return e=isNaN(e)?"":Number(e).toLocaleString(this.options.locale,{maximumFractionDigits:this.options.precision,minimumFractionDigits:this.options.precision}),e},addsDecimalSeparator(e){if(this.options.precision>0){const t=e.length-parseInt(this.options.precision);e=e.substring(0,t)+"."+e.substring(t,e.length)}return e},machineFormat(e){return e?(e=this.cleanNumber(e),e=e.padStart(parseInt(this.options.precision)+1,"0"),e=this.addsDecimalSeparator(e),isNaN(e)&&(e=this.valueWhenIsEmpty)):e=this.valueWhenIsEmpty,0===this.options.precision&&(e=this.cleanNumber(e)),e},keyPress(e){let t=e.keyCode?e.keyCode:e.which;(t<48||t>57)&&e.preventDefault(),this.hitTargetLength()&&e.preventDefault()},cleanNumber:function(e){let t="";if(e){let a=!1,i=e.toString().split("");for(var s=0;s<i.length;s++)this.isInteger(i[s])&&(a?t+=i[s]:"0"!==i[s]&&(t+=i[s],a=!0))}return""==t&&(t="0"),t},isInteger(e){return Number.isInteger(parseInt(e))},hitTargetLength(){return Number(this.cleanNumber(this.value).length)>=Number(this.options.length)},hitMaxLimit(e){return this.options.max&&Number(e)>Number(this.options.max)},onBlur(){(this.value&&0===this.value.length||parseFloat(this.value)<=this.valueOptions.min)&&this.$emit(this.valueOptions.minEvent||"SetValueMin",this.valueOptions.min),this.valueOptions.max&&parseFloat(this.value)>=this.valueOptions.max&&this.$emit(this.valueOptions.maxEvent||"SetValueMax",this.valueOptions.max)}}},Xe=Ke,Ye=(0,$.Z)(Xe,Ge,Je,!1,null,null,null),et=Ye.exports;function tt(e){e.component("vuetify-money",et)}var st=tt,at={percent:{decimalDigits:0},currency:{symbol:"$",decimalDigits:0,thousandsSeparator:".",decimalSeparator:",",symbolOnLeft:!0,spaceBetweenAmountAndSymbol:!0,showPlusSign:!1}};a["default"].use(We(),at),a["default"].use(Qe.Z),a["default"].use(De()),a["default"].use(st),te.use((({store:e})=>{e.router=(0,a.markRaw)(He)})),a["default"].config.productionTip=!1,a["default"].prototype.$axios=l(),window.axios=s(6265),window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",window.axios.interceptors.request.use((e=>{const t=localStorage.getItem("access_token");return t&&(e.headers["x-access-token"]=t),e}),(e=>{Promise.reject(e)})),new a["default"]({vuetify:new(De())({theme:{dark:!1},lang:{t:(e,...t)=>p.t(e,t)}}),pinia:te,i18n:p,router:He,render:e=>e(z)}).$mount("#app")},8092:function(e,t,s){var a={"./en.json":790,"./es.json":8563};function i(e){var t=r(e);return s(t)}function r(e){if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=r,e.exports=i,i.id=8092},790:function(e){"use strict";e.exports=JSON.parse('{"menus":{"active_source":"Active source","culture":"Culture","about":"About","delete_record_title":"Delete record","cancel":"Cancel","loading":"Loading..."},"globals":{"period":"Period"},"active_source":{"area":"Area","questionaire_type":"Type of questionaire","question_theme":"Questions Theme","user":"User","question":"Question","answer":"Answer","section_closed":"Section closed/completed","actor_table":{"name":"Name","area":"Area","actions":"Actions"}},"culture":{"themes":"Themes","now":"Now","preferred":"Preferred"},"login":{"email_required":"E-mail is required!","pwd_required":"Password is required!","password":"Password","new_password":"New password","forgot_pwd":"Forgot password?","min_pwd":"Password must be min 5 characters long!","email_not_valid":"Email is not valid!","pwd_not_valid":"Password is not valid!","missing_token":"Missing Token!","invalid_token":"Invalid Token!","missing_credentials":"Missing credentials!","user_not_registered":"User is not registered!","bad_credentials":"Invalid credentials!","confirmation_pwd_not_match":"Confirmation password does not match!","confirmation_password":"Confirmation password","invalid_or_expired_token":"The token is invalid or has already expired! Please login again...","reset_password":{"title":"Reset password...","email_sent":"An email has just been sent to you in order to reset your password!","email_error":"An error occured while trying to send the email!","pwd_reset_successful":"Your password was reset successfully!","send_request":"Send request","change_pwd":"Change password"}},"api_responses":{"interacting_actor_deleted":"Interacting actor was deleted, as all answers related to it in other sections!!","new_interacting_actor_added":"New interacting actor added!","answer_saved":"Your answer has been saved!","form_closed":"Form closed!","form_opened":"Form enabled again!","no_results":"No results found!"},"alerts":{"limit_value_is":"The limit value is","sum_limit":"Sum should be 100!","delete_record_text":"Are you sure you want to delete this record?","delete_interacting_person_text":"Are you sure you want to delete this person?<br> All answers associated to this person in other sections will be deleted!"}}')},8563:function(e){"use strict";e.exports=JSON.parse('{"menus":{"active_source":"Fuente Activa","culture":"Cultura","about":"Acerca de..","delete_record_title":"Borrar registro","cancel":"Cancelar","loading":"Cargando..."},"globals":{"period":"Periodo"},"active_source":{"area":"Area","questionaire_type":"Tipo de Cuestionario","question_theme":"Temáticas de las preguntas","user":"Empleado","question":"Pregunta","answer":"Respuesta","section_closed":"Sección cerrada/completada","actor_table":{"name":"Nombre","area":"Area","actions":"Acciones"}},"culture":{"themes":"Temas","now":"Ahora","preferred":"Preferido"},"login":{"email_required":"E-mail es requerido!","pwd_required":"Contraseña es requerida!","password":"Contraseña","new_password":"Nueva contraseña","forgot_pwd":"¿Olvidó su contraseña?","min_pwd":"Contraseña debe ser mínimo de 5 caracteres!","email_not_valid":"E-mail no es válido!","pwd_not_valid":"Contraseña no es válida!","missing_token":"Token no está presente!","invalid_token":"Token inválido!","missing_credentials":"Faltan las credenciales!","user_not_registered":"Usuario no está registrado!","bad_credentials":"Credenciales incorrectas!","confirmation_pwd_not_match":"La contraseña de confirmación no coincide!!","confirmation_password":"Confirmación de contraseña","invalid_or_expired_token":"El token es inválido o ya ha expirado! Por favor autentíquese nuevamente...","reset_password":{"title":"Restablecer constraseña...","email_sent":"Un correo ha sido enviado a su cuenta para reestablecer su contraseña!","email_error":"Ocurrió un error en el envío del correo!","pwd_reset_successful":"Su contraseña fue reestablecida con éxito!","send_request":"Enviar solicitud","change_pwd":"Cambiar contraseña"}},"api_responses":{"interacting_actor_deleted":"Actor fue eliminado, así como todas las respuestas relacionadas a este en otras secciones!!","new_interacting_actor_added":"Nuevo actor ha sido agregado!","answer_saved":"Su respuesta ha sido guardada!","form_closed":"Formulario cerrado!","form_opened":"Formulario habilitado nuevamente!","no_results":"No se hallaron resultados!"},"alerts":{"limit_value_is":"El valor límite es","sum_limit":"La suma debe ser igual a 100!","delete_record_text":"Está seguro de eliminar este registro?","delete_interacting_person_text":"Está seguro de eliminar esta persona?<br> Todas las respuestas asociadas a esta persona en otras secciones serán borradas!"}}')}},t={};function s(a){var i=t[a];if(void 0!==i)return i.exports;var r=t[a]={exports:{}};return e[a].call(r.exports,r,r.exports,s),r.exports}s.m=e,function(){var e=[];s.O=function(t,a,i,r){if(!a){var o=1/0;for(d=0;d<e.length;d++){a=e[d][0],i=e[d][1],r=e[d][2];for(var n=!0,l=0;l<a.length;l++)(!1&r||o>=r)&&Object.keys(s.O).every((function(e){return s.O[e](a[l])}))?a.splice(l--,1):(n=!1,r<o&&(o=r));if(n){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[a,i,r]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var i,r,o=a[0],n=a[1],l=a[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in n)s.o(n,i)&&(s.m[i]=n[i]);if(l)var d=l(s)}for(t&&t(a);c<o.length;c++)r=o[c],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(d)},a=self["webpackChunkOA_HUB"]=self["webpackChunkOA_HUB"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(32)}));a=s.O(a)})();
//# sourceMappingURL=app.1cf585f1.js.map