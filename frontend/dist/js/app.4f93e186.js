(function(){var e={3269:function(e,t,s){"use strict";var a=s(6369),i=function(){var e=this,t=e._self._c;return t("v-app",[e.mainStore.isLoggedIn?t("v-navigation-drawer",{attrs:{clipped:e.$vuetify.breakpoint.lgAndUp,app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[t("v-list",{attrs:{dense:""}},[e._l(e.menus,(function(s){return[s.children?t("v-list-group",{key:s.text,attrs:{"prepend-icon":s.icon,"append-icon":s["icon-alt"]},scopedSlots:e._u([{key:"activator",fn:function(){return[t("v-list-item-content",[t("v-list-item-title",[e._v(" "+e._s(s.text)+" ")])],1)]},proxy:!0}],null,!0)},e._l(s.children,(function(s,a){return t("v-list-item",{key:a,attrs:{to:{name:s.route}}},[s.icon?t("v-list-item-action",[t("v-icon",[e._v(e._s(s.icon))])],1):e._e(),t("v-list-item-content",[t("v-list-item-title",[e._v(" "+e._s(s.text)+" ")])],1)],1)})),1):t("v-list-item",{key:s.text,attrs:{to:{name:s.route}}},[t("v-list-item-action",[t("v-icon",[e._v(e._s(s.icon))])],1),t("v-list-item-content",[t("v-list-item-title",[e._v(" "+e._s(s.text)+" ")])],1)],1)]}))],2)],1):e._e(),t("v-app-bar",{attrs:{"clipped-left":e.$vuetify.breakpoint.lgAndUp,color:"primary",app:""}},[e.mainStore.isLoggedIn?t("v-app-bar-nav-icon",{staticStyle:{color:"white"},on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}):e._e(),t("v-spacer"),e.mainStore.isLoggedIn?t("v-toolbar-items",[t("LocaleSwitcher"),t("v-btn",{staticClass:"white--text",attrs:{text:""}},[e._v(e._s(e.mainStore.logged_user.name))]),t("v-btn",{staticStyle:{color:"white"},attrs:{icon:""},on:{click:e.mainStore.logout}},[t("v-icon",[e._v("mdi-logout")])],1)],1):t("v-toolbar-items",[t("LocaleSwitcher")],1)],1),t("header",[t("link",{attrs:{href:"https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900",rel:"stylesheet"}}),t("link",{attrs:{href:"https://cdn.jsdelivr.net/npm/@mdi/font@6.x/css/materialdesignicons.min.css",rel:"stylesheet"}})]),t("v-main",[t("flash-message",{staticStyle:{height:"8px","padding-top":"40px"}}),t("keep-alive",[t("router-view")],1),t("loader")],1),t("v-footer")],1)},o=[],r=s(3556),n=s(6265),l=s.n(n),c=s(1598),d=s(6018),u=s(8308),_=s(6808);function h(e){return e["en"]["$vuetify"]=u.Z,e["es"]["$vuetify"]=_.Z,e}function m(){const e=s(8092);let t={};return e.keys().forEach((s=>{const a=s.match(/([A-Za-z0-9-_]+)\./i);if(a&&a.length>1){const i=a[1];t[i]=e(s)}})),t=h(t),t}a["default"].use(d.Z);const p=new d.Z({locale:"es",fallbackLocale:"es",messages:m()}),v={id:"",name:"",email:"",role:""},g=(0,r.Q_)("main",{state:()=>({token:localStorage.getItem("access_token")||"",logged_user:v,employees:[],cycles:[],networks:[],areas:[],network_modes:[],culture_modes:[],loader:!1,flash_message:"",flash_message_type:"",selected_cycle:null}),getters:{isLoggedIn:e=>!!e.token,filteredCycles:e=>e.cycles.filter((e=>e.Is_active))},actions:{async initialize(){this.getAreas(),this.getEmployees(),this.getNetworks(),this.getCycles(),this.getCultureModes()},async logIn(e){await l().post("https://oahub.finacanalytics.com/api/v1/login",e).then((e=>{let t=e.data.token;localStorage.setItem("access_token",t),this.token=t,this.setLoggedUser(),this.initialize(),this.router.push("/active_source").catch((e=>{console.log(e)}))})).catch((e=>{console.log(e),this.$reset(),localStorage.removeItem("access_token"),this.setFlashMessage({message:e.response.data,type:"error"}),this.router.push("/login").catch((()=>{}))}))},logout(){this.$reset(),localStorage.removeItem("access_token"),this.logged_user=Object.assign({},v),this.token="",this.router.push("/login").catch((()=>{}))},setLoggedUser(){let e=(0,c.Z)(this.token);this.logged_user.id=e.id,this.logged_user.name=e.username,this.logged_user.email=e.email,this.logged_user.role=e.roles[0].name},async getNetworkModes(e){if(e){const t=await l().get("https://oahub.finacanalytics.com/api/v1/cycle/"+e+"/network_modes");this.network_modes=t.data}},async getEmployees(){const e=await l().get("https://oahub.finacanalytics.com/api/v1/users");this.employees=e.data},async getCycles(){const e=await l().get("https://oahub.finacanalytics.com/api/v1/cycles");this.cycles=e.data},async getNetworks(){const e=await l().get("https://oahub.finacanalytics.com/api/v1/networks/"+p.locale);this.networks=e.data},async getAreas(){const e=await l().get("https://oahub.finacanalytics.com/api/v1/areas");this.areas=e.data},async getCultureModes(){const e=await l().get("https://oahub.finacanalytics.com/api/v1/culture/modes");this.culture_modes=e.data},setFlashMessage(e){if(e.message){let t="";t=p.te(`${e.message}`)?p.t(`${e.message}`):e.message,this.flash_message=t,this.flash_message_type=e.type}else this.flash_message="",this.flash_message_type=null}}});var w=function(){var e=this,t=e._self._c;return t("v-menu",{attrs:{bottom:"",left:""},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:a}){return[t("v-btn",e._g(e._b({staticClass:"white--text",attrs:{icon:""}},"v-btn",a,!1),s),[t("v-icon",[e._v("mdi-web")]),e._v(e._s(e.$i18n.locale)+" ")],1)]}}])},[t("v-list",e._l(e.filteredLocales,(function(s){return t("v-list-item",{key:s},[t("v-list-item-title",{on:{click:function(t){return e.switchLocale(s)}}},[e._v(e._s(s.toUpperCase()))])],1)})),1)],1)},f=[],k={name:"LocaleSwitcher",data(){return{locales:"es,en".split(",")}},computed:{filteredLocales(){return this.locales.filter((e=>e!==this.$i18n.locale))}},methods:{switchLocale(e){this.$i18n.locale!==e&&(this.$i18n.locale=e)}}},y=k,$=s(1001),b=(0,$.Z)(y,w,f,!1,null,null,null),x=b.exports,S=function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-xs-center"},[t("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.loader,callback:function(t){e.loader=t},expression:"loader"}},[t("v-card",{attrs:{color:"primary",dark:""}},[t("v-card-text",[e._v(" "+e._s(e.$t("menus.loading"))+" "),t("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1)],1)},N=[],C={computed:{...(0,r.rn)(g,["loader"])}},q=C,A=(0,$.Z)(q,S,N,!1,null,null,null),O=A.exports,T=function(){var e=this,t=e._self._c;return t("div",[t("v-row",[t("v-col",{attrs:{md:"6","offset-md":"3"}},[e.flash_message?t("v-alert",{attrs:{type:e.flash_message_type,text:"",dismissible:""},on:{input:e.onClose}},[e._v(" "+e._s(e.flash_message)+" ")]):e._e()],1)],1)],1)},I=[],D={computed:{...(0,r.rn)(g,["flash_message","flash_message_type"])},watch:{flash_message(e){e&&setTimeout((()=>{this.setFlashMessage({})}),5e3)}},methods:{...(0,r.nv)(g,["setFlashMessage"]),onClose(){this.setFlashMessage({})}}},j=D,F=(0,$.Z)(j,T,I,!1,null,null,null),M=F.exports,E={data(){return{drawer:!0,menus:[{icon:"mdi-crowd",text:`${this.$t("menus.active_source")}`,route:"ActiveSource",roles:["Admin"]},{icon:"mdi-account-group",text:`${this.$t("menus.culture")}`,route:"Culture",roles:["Admin"]}]}},components:{LocaleSwitcher:x,Loader:O,flashMessage:M},created(){this.mainStore.isLoggedIn&&(this.mainStore.initialize(),this.mainStore.setLoggedUser()),this.$axios.interceptors.request.use((e=>(this.mainStore.loader=!0,e)),(e=>(this.mainStore.loader=!1,Promise.reject(e)))),this.$axios.interceptors.response.use((e=>(this.mainStore.loader=!1,e)),(e=>(this.mainStore.loader=!1,401==e.response.status&&(this.mainStore.$reset(),localStorage.removeItem("access_token"),this.mainStore.logged_user=Object.assign({},{id:"",name:"",email:"",role:""}),this.mainStore.token="",["login.invalid_token","login.missing_token"].includes(e.response.data.message)&&(this.mainStore.setFlashMessage({message:"login.invalid_or_expired_token",type:"error"}),this.$router.push("/login"))),Promise.reject(e))))},computed:{...(0,r.Kc)(g)},watch:{"$i18n.locale"(){this.translateMenus()}},methods:{translateMenus(){this.menus[0].text=this.$t("menus.active_source"),this.menus[1].text=this.$t("menus.culture")}}},L=E,U=(0,$.Z)(L,i,o,!1,null,"0e70df57",null),P=U.exports,Z=s(2631),z=function(){var e=this,t=e._self._c;return t("v-container",{attrs:{"fill-height":"",fluid:""}},[t("v-layout",{attrs:{"align-center":"","justify-center":""}},[t("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[t("v-card",{staticClass:"elevation-12"},[t("v-toolbar",{attrs:{dark:"",color:"primary"}},[t("v-toolbar-title",[e._v(e._s(e.$t("login.reset_password.title")))]),t("v-spacer")],1),t("v-card-text",[t("v-form",{model:{value:e.valid_form,callback:function(t){e.valid_form=t},expression:"valid_form"}},[t("v-text-field",{attrs:{"prepend-icon":"mdi-email",label:"Email",type:"text",rules:[t=>!!t||e.$t("login.email_required"),t=>/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(t)||e.$t("login.email_not_valid")]},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1)],1),t("v-card-actions",[t("v-spacer"),t("v-btn",{attrs:{disabled:e.sending_email},on:{click:e.cancel}},[e._v(e._s(e.$t("menus.cancel")))]),t("v-btn",{attrs:{color:"primary",disabled:e.isValidForm},on:{click:e.requestPasswordReset}},[e._v(e._s(e.$t("login.reset_password.send_request")))])],1)],1)],1)],1)],1)},H=[],R={data(){return{email:null,has_error:!1,valid_form:!1,sending_email:!1}},computed:{isValidForm(){return!this.valid_form||this.sending_email}},methods:{...(0,r.nv)(g,["setFlashMessage"]),cancel(){this.$router.push({path:"Login"})},requestPasswordReset(){this.sending_email=!0,this.$axios.post("https://oahub.finacanalytics.com/api/v1/request_password_reset",{email:this.email,lang:this.$i18n.locale}).then((e=>{this.sending_email=!1,this.setFlashMessage({message:e.data,type:"success"}),this.$router.replace("/")})).catch((e=>{this.sending_email=!1,this.setFlashMessage({message:e.response.data,type:"error"}),this.email=""}))}}},V=R,Q=(0,$.Z)(V,z,H,!1,null,null,null),B=Q.exports,G=function(){var e=this,t=e._self._c;return t("v-container",{attrs:{"fill-height":"",fluid:""}},[t("v-layout",{attrs:{"align-center":"","justify-center":""}},[t("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[t("v-card",{staticClass:"elevation-12"},[t("v-toolbar",{attrs:{dark:"",color:"primary"}},[t("v-toolbar-title",[e._v(e._s(e.$t("login.reset_password.change_pwd")))]),t("v-spacer")],1),t("v-card-text",[t("v-form",{model:{value:e.valid_form,callback:function(t){e.valid_form=t},expression:"valid_form"}},[t("v-text-field",{attrs:{"prepend-icon":"mdi-email",label:"Email",type:"text",disabled:"",rules:[e=>!!e||"E-mail es requerido!",e=>/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(e)||"E-mail no es válido"]},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),t("v-text-field",{attrs:{id:"password","prepend-icon":"mdi-lock",label:e.$t("login.new_password"),type:e.show_pwd?"text":"password","append-icon":e.show_pwd?"mdi-eye":"mdi-eye-off",rules:[t=>!!t||e.$t("login.pwd_required"),t=>/^\w(?=.{4,})/.test(t)||e.$t("login.min_pwd")]},on:{"click:append":function(t){e.show_pwd=!e.show_pwd}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),t("v-text-field",{attrs:{id:"confirmation_password","prepend-icon":"mdi-lock",label:e.$t("login.confirmation_password"),type:e.show_conf_pwd?"text":"password","append-icon":e.show_conf_pwd?"mdi-eye":"mdi-eye-off",rules:[t=>!!t||e.$t("login.pwd_required"),t=>/^\w(?=.{4,})/.test(t)||e.$t("login.min_pwd"),t=>t===this.password||e.$t("login.confirmation_pwd_not_match")]},on:{"click:append":function(t){e.show_conf_pwd=!e.show_conf_pwd}},model:{value:e.confirmation_password,callback:function(t){e.confirmation_password=t},expression:"confirmation_password"}})],1)],1),t("v-card-actions",[t("v-spacer"),t("v-btn",{on:{click:e.cancel}},[e._v(e._s(e.$t("menus.cancel")))]),t("v-btn",{attrs:{color:"primary",type:"submit",disabled:!e.valid_form},on:{click:e.resetPassword}},[e._v(e._s(e.$t("login.reset_password.change_pwd")))])],1)],1)],1)],1)],1)},W=[],J={data(){return{token:null,email:this.$route.params.email,password:null,confirmation_password:null,has_error:!1,show_pwd:!1,show_conf_pwd:!1,valid_form:!1}},methods:{...(0,r.nv)(g,["setFlashMessage"]),cancel(){this.$router.replace("/")},resetPassword(){this.$axios.post("https://oahub.finacanalytics.com/api/v1/reset_password",{token:this.$route.params.token,email:this.$route.params.email,password:this.password,confirmation_password:this.confirmation_password}).then((e=>{this.setFlashMessage({message:e.data,type:"success"}),this.$router.replace("/")})).catch((e=>{this.setFlashMessage({message:e.response.data,type:"error"})}))}}},K=J,X=(0,$.Z)(K,G,W,!1,null,null,null),Y=X.exports;a["default"].use(r.og);const ee=(0,r.WB)();var te=ee,se=function(){var e=this,t=e._self._c;return t("v-container",{staticClass:"px-10",attrs:{fluid:""}},[t("br"),t("v-row",[t("v-col",{staticClass:"d-flex justify-space-around mb-6 align-end",attrs:{cols:"2"}},[t("v-select",{attrs:{items:e.mainStore.filteredCycles,label:e.$t("globals.period"),"item-text":`Cycle_${e.$i18n.locale}`,"item-value":"id_cycle",clearable:"",dense:""},model:{value:e.mainStore.selected_cycle,callback:function(t){e.$set(e.mainStore,"selected_cycle",t)},expression:"mainStore.selected_cycle"}})],1),e.mainStore.selected_cycle?t("v-col",{staticClass:"d-flex justify-space-around mb-6 align-end",attrs:{cols:"2"}},[t("v-select",{attrs:{items:e.mainStore.networks,label:e.$t("active_source.questionaire_type"),"item-text":`name_${e.$i18n.locale}`,"item-value":"id",clearable:"","return-object":"",dense:""},on:{"click:clear":e.clearVariables,change:function(t){return e.getData()}},model:{value:e.selected_network,callback:function(t){e.selected_network=t},expression:"selected_network"}})],1):e._e(),e.filteredNetwokModeThemes?t("v-col",{staticClass:"d-flex justify-space-around mb-6 align-end",attrs:{cols:"3"}},[t("v-select",{attrs:{items:e.filteredNetwokModeThemes,label:e.$t("active_source.question_theme"),"item-text":`Network_mode_theme_${e.$i18n.locale}`,"item-value":"id_network_mode_theme",clearable:"",dense:""},on:{change:function(t){return e.getData()},"click:clear":e.clearVariables},model:{value:e.selected_network_mode_theme,callback:function(t){e.selected_network_mode_theme=t},expression:"selected_network_mode_theme"}})],1):e._e(),e.selected_network&&"explora"===e.selected_network.code?t("v-col",{staticClass:"d-flex justify-space-around mb-6 align-end",attrs:{cols:"6"}},[t("v-autocomplete",{attrs:{items:e.user_tools,"item-text":`name_${e.$i18n.locale}`,"item-value":"id",label:e.$t("active_source.tools"),multiple:"","return-object":"",dense:"",disabled:e.currentForm&&e.currentForm.is_concluded},on:{change:function(t){return e.removeToolsIfDeselected()}},scopedSlots:e._u([{key:"selection",fn:function({attrs:s,item:a,selected:i}){return[t("v-chip",e._b({attrs:{"input-value":i,close:"",small:""},on:{"click:close":function(t){return e.delRecord(a.id,"menus.delete_record_title","alerts.delete_tool_text",e.selected_network[`name_${e.$i18n.locale}`],"Explora")}}},"v-chip",s,!1),[e._v(" "+e._s(a[`name_${e.$i18n.locale}`])+" ")])]}}],null,!1,1532753228),model:{value:e.selected_tools,callback:function(t){e.selected_tools=t},expression:"selected_tools"}})],1):e._e(),e.selected_network&&"actor"===e.selected_network.code?t("v-col",{staticClass:"d-flex justify-space-around mb-6 align-end",attrs:{cols:"2"}},[t("v-autocomplete",{attrs:{items:e.mainStore.areas,label:e.$t("active_source.area"),"item-text":`Organization_area_${e.$i18n.locale}`,"item-value":"id_organization_area",clearable:"",dense:"",disabled:e.currentForm&&e.currentForm.is_concluded},model:{value:e.selected_area,callback:function(t){e.selected_area=t},expression:"selected_area"}})],1):e._e(),e.selected_network&&"actor"===e.selected_network.code?t("v-col",{staticClass:"d-flex justify-space-around mb-6 align-end",attrs:{cols:"3"}},[t("v-autocomplete",{attrs:{items:e.filteredEmployees,"item-text":"username","item-value":"id",label:e.$t("active_source.user"),"persistent-hint":"","small-chips":"",multiple:"","return-object":"",dense:"",disabled:e.currentForm&&e.currentForm.is_concluded},on:{change:function(t){return e.addInteractingActor()}},model:{value:e.selected_actors,callback:function(t){e.selected_actors=t},expression:"selected_actors"}})],1):e._e()],1),e.mainStore.network_modes.length?t("v-row",e._l(e.forms,(function(s,a){return t("v-col",{key:a,attrs:{cols:"2"}},[t("gauge",{attrs:{label:s[`name_${e.$i18n.locale}`],in_value:Math.round(100*s["answers"]/(s["total_questions"]*s["total_items"])),in_size:e.current_network_mode&&s.id==e.current_network_mode.id_network_mode?100:60,in_width:e.current_network_mode&&s.id==e.current_network_mode.id_network_mode?15:7},nativeOn:{click:function(t){return e.setSelectedNetworkAndTheme(s)}}})],1)})),1):e._e(),e.current_network_mode?t("v-row",[t("v-col",{attrs:{cols:"3"}},[e.currentForm?t("v-switch",{attrs:{label:`${e.$t("active_source.section_closed")}: ${e.getFormSectionName(this.current_network_mode,this.$i18n.locale)}`},on:{change:e.toggleOpenCloseCurrentForm},model:{value:e.currentForm.is_concluded,callback:function(t){e.$set(e.currentForm,"is_concluded",t)},expression:"currentForm.is_concluded"}}):e._e()],1),e.selected_network&&["educ_model","resource"].includes(e.selected_network.code)&&e.currentForm&&!e.currentForm.is_concluded?t("v-col",{staticClass:"d-flex justify-end mr-11"},[t("add-node",{attrs:{label:e.selected_network[`name_${e.$i18n.locale}`],network_mode_id:e.current_network_mode.id_network_mode},on:{newnode:e.refreshNodes}})],1):e._e(),e.selected_network&&"narrative"===e.selected_network.code&&e.currentForm&&!e.currentForm.is_concluded?t("v-col",{staticClass:"d-flex justify-end mr-11"},[t("add-narrative",{attrs:{showNarrativeDialog:e.showNarrativeDialog,label:e.selected_network[`name_${e.$i18n.locale}`],network_mode_id:e.current_network_mode.id_network_mode,mode:e.narrativeDialogMode,item:e.narrativeItem},on:{"update:showNarrativeDialog":function(t){e.showNarrativeDialog=t},"update:show-narrative-dialog":function(t){e.showNarrativeDialog=t},new_narrative:e.addNarrative,narrative_updated:e.updateNarrative,close:e.closeNarrativeDialog}})],1):e._e()],1):e._e(),t("v-row",{attrs:{dense:"",justify:"space-around"}},[e.selected_network&&!["explora","narrative"].includes(e.selected_network.code)?t("v-col",{attrs:{cols:"3"}},e._l(e.questions,(function(s,a){return t("div",{key:a},[t("v-card",[t("v-app-bar",{attrs:{flat:"",color:"blue"}},[t("v-card-title",{staticClass:"white--text"},[e._v(" "+e._s(e.$t("active_source.question"))+" "+e._s(a+1)+" ")])],1),t("v-card-text",[e._v(e._s(s[`Question_${e.$i18n.locale}`]))])],1),t("br")],1)})),0):e._e(),e.selected_network&&"actor"===e.selected_network.code?t("v-col",{attrs:{cols:"8"}},[e.selected_actors.length>0?t("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.tableActorsHeader,items:e.selected_actors,"items-per-page":-1,dense:""},scopedSlots:e._u([{key:"item",fn:function({item:s}){return[t("tr",[t("td",{staticClass:"text-xs-left"},[e._v(e._s(s.username))]),t("td",{staticClass:"text-xs-left"},[e._v(e._s(s.organization_area[`Organization_area_${e.$i18n.locale}`]))]),e._l(e.questions,(function(a,i){return t("td",{key:i},[t("v-select",{staticClass:"my-5",attrs:{id:`sel_${e.current_network_mode.id_network_mode}_${a.id_question}_${s.id}`,items:JSON.parse(a.question_possible_answers[`Question_possible_answers_${e.$i18n.locale}`]),"item-text":"texto","item-value":"valor",clearable:"",multiple:a.question_possible_answers.multiple,"deletable-chips":"","small-chips":"",outlined:"",flat:"",rounded:"",dense:"",disabled:e.currentForm&&e.currentForm.is_concluded},on:{change:function(t){return e.saveAnswersArray(t,s.id,a.id_question)}},model:{value:e.answers[`${e.current_network_mode.id_network_mode}_${a.id_question}_${s.id}`],callback:function(t){e.$set(e.answers,`${e.current_network_mode.id_network_mode}_${a.id_question}_${s.id}`,t)},expression:"answers[`${current_network_mode.id_network_mode}_${question.id_question}_${item.id}`]"}})],1)})),t("td",[!e.selected_network_mode_theme||e.currentForm&&!e.currentForm.is_concluded?t("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t("v-icon",e._g({attrs:{small:"",color:"orange"},on:{click:function(t){return e.delRecord(s.id,"menus.delete_record_title","alerts.delete_interacting_person_text",e.selected_network[`name_${e.$i18n.locale}`],"Actor")}}},a),[e._v(" mdi-delete ")])]}}],null,!0)},[t("span",[e._v(e._s(e.$t("menus.delete")))])]):e._e()],1)],2)]}}],null,!1,1322929915)}):e._e()],1):e._e(),e.selected_network&&["educ_model","resource"].includes(e.selected_network.code)?t("v-col",{attrs:{cols:"8"}},[e.nodes?t("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.tableNodesHeader,items:e.filteredNodes,"items-per-page":-1,dense:""},scopedSlots:e._u([{key:"item",fn:function({item:s}){return[t("tr",[t("td",{staticClass:"text-xs-left"},[e._v(" "+e._s(s[`Node_${e.$i18n.locale}`])+" ")]),e._l(e.questions,(function(a,i){return t("td",{key:i},[t("v-select",{staticClass:"my-5",attrs:{id:`sel_${e.current_network_mode.id_network_mode}_${a.id_question}_${s.id_node}`,items:JSON.parse(a.question_possible_answers[`Question_possible_answers_${e.$i18n.locale}`]),"item-text":"texto","item-value":"valor",clearable:"",multiple:a.question_possible_answers.multiple,"deletable-chips":"","small-chips":"",outlined:"",flat:"",rounded:"",dense:"",disabled:e.currentForm&&e.currentForm.is_concluded},on:{change:function(t){return e.saveAnswersArray(t,s.id_node,a.id_question)}},model:{value:e.answers[`${e.current_network_mode.id_network_mode}_${a.id_question}_${s.id_node}`],callback:function(t){e.$set(e.answers,`${e.current_network_mode.id_network_mode}_${a.id_question}_${s.id_node}`,t)},expression:"answers[`${current_network_mode.id_network_mode}_${question.id_question}_${item.id_node}`]"}})],1)})),t("td",[e.mainStore.logged_user.id==s.id_employee&&e.currentForm&&!e.currentForm.is_concluded?t("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t("v-icon",e._g({attrs:{small:"",color:"orange"},on:{click:function(t){return e.delRecord(s.id_node,"menus.delete_record_title","alerts.delete_item_text",e.selected_network[`name_${e.$i18n.locale}`],"Node")}}},a),[e._v(" mdi-delete ")])]}}],null,!0)},[t("span",[e._v(e._s(e.$t("menus.delete")))])]):e._e()],1)],2)]}}],null,!1,1271471262)}):e._e()],1):e._e(),e.selected_network&&"explora"===e.selected_network.code?t("v-col",{attrs:{cols:"12"}},[e.selected_tools.length>0?t("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.tableToolsHeader,items:e.selected_tools,"items-per-page":-1,"fixed-header":"","hide-default-footer":"","disable-pagination":"",height:"500",dense:""},scopedSlots:e._u([{key:"item",fn:function({item:s}){return[t("tr",[t("td",{staticClass:"text-xs-left",staticStyle:{width:"15%"}},[e._v(e._s(s[`name_${e.$i18n.locale}`]))]),e._l(e.filteredQuestions,(function(a,i){return t("td",{key:i,staticStyle:{width:"7%"}},[t("v-select",{staticClass:"my-5",attrs:{id:`sel_${e.current_network_mode.id_network_mode}_${a.id_question}_${s.id}`,items:JSON.parse(a.question_possible_answers[`Question_possible_answers_${e.$i18n.locale}`]),"item-text":"texto","item-value":"valor",clearable:"",multiple:a.question_possible_answers.multiple,"deletable-chips":"","small-chips":"",outlined:"",flat:"",rounded:"",dense:"",disabled:e.currentForm&&e.currentForm.is_concluded},on:{change:function(t){return e.saveAnswersArray(t,s.id,a.id_question)}},model:{value:e.answers[`${e.current_network_mode.id_network_mode}_${a.id_question}_${s.id}`],callback:function(t){e.$set(e.answers,`${e.current_network_mode.id_network_mode}_${a.id_question}_${s.id}`,t)},expression:"answers[`${current_network_mode.id_network_mode}_${question.id_question}_${item.id}`]"}})],1)})),t("td",[s.options&&s.options.length>0&&e.externalSourceQuestion&&e.answers[`${e.current_network_mode.id_network_mode}_${e.externalSourceQuestion.id_question}_${s.id}`]?t("div",[t("ul",e._l(e.answers[`${e.current_network_mode.id_network_mode}_${e.externalSourceQuestion.id_question}_${s.id}`],(function(a,i){return t("li",{key:i},[e._v(" "+e._s(s.options.find((e=>e.id===a))[`name_${e.$i18n.locale}`])+" "),e.currentForm&&!e.currentForm.is_concluded?t("v-icon",{attrs:{small:"",color:"red darken-2"},on:{click:function(t){return e.deleteSelectedOption(e.current_network_mode.id_network_mode,e.externalSourceQuestion.id_question,s.id,i)}}},[e._v(" mdi-close-circle-outline ")]):e._e()],1)})),0)]):e._e()]),t("td",{attrs:{align:"right"}},[e.currentForm&&!e.currentForm.is_concluded?t("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t("v-icon",e._g({attrs:{small:"",color:"green"},on:{click:function(t){return e.showUsageOptionsDialog(s,e.externalSourceQuestion.id_question)}}},a),[e._v(" mdi-form-select ")])]}}],null,!0)},[t("span",[e._v(e._s(e.$t("menus.select_usage_options"))+" ")])]):e._e(),e.currentForm&&!e.currentForm.is_concluded?t("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t("v-icon",e._g({attrs:{small:"",color:"orange"},on:{click:function(t){return e.delRecord(s.id,"menus.delete_record_title","alerts.delete_tool_text",e.selected_network[`name_${e.$i18n.locale}`],"Explora")}}},a),[e._v(" mdi-delete ")])]}}],null,!0)},[t("span",[e._v(e._s(e.$t("menus.delete")))])]):e._e()],1)],2)]}}],null,!1,2188177127)}):e._e()],1):e._e(),e.selected_network&&"narrative"===e.selected_network.code?t("v-col",{attrs:{cols:"12"}},[e.narratives.length>0?t("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.defaultNarrativesHeader,items:e.narratives,"items-per-page":-1,"hide-default-footer":"","disable-pagination":"",dense:""},scopedSlots:e._u([{key:"item",fn:function({item:s}){return[t("tr",[t("td",{staticClass:"text-xs-left",staticStyle:{width:"25%"}},[e._v(" "+e._s(s["title"])+" ")]),t("td",{staticStyle:{width:"50%"}},[e._v(" "+e._s(s["narrative"])+" ")]),t("td",{attrs:{align:"right"}},[e.currentForm&&!e.currentForm.is_concluded?t("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t("v-icon",e._g({attrs:{small:"",color:"green"},on:{click:function(t){return e.editNarrative(s)}}},a),[e._v(" mdi-pencil ")])]}}],null,!0)},[t("span",[e._v(e._s(e.$t("globals.edit"))+" ")])]):e._e(),e.currentForm&&!e.currentForm.is_concluded?t("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t("v-icon",e._g({attrs:{small:"",color:"orange"},on:{click:function(t){return e.delRecord(s.id,"menus.delete_record_title","alerts.delete_narrative_text",e.selected_network[`name_${e.$i18n.locale}`],"Narrative")}}},a),[e._v(" mdi-delete ")])]}}],null,!0)},[t("span",[e._v(e._s(e.$t("globals.delete")))])]):e._e()],1)])]}}],null,!1,1285422397)}):e._e()],1):e._e()],1),t("confirmation-dialog",{ref:"confirmDeleteActor"}),t("UsageOptionsDialog",{attrs:{usageOptions:e.toolOptions,toolID:e.toolID,questionID:e.questionID,defaultOptions:e.selected_options,showDialog:e.openUsageOptionsDialog},on:{close:e.closeUsageOptionsDialog,usageOptionsSelected:function(t){return e.saveAnswersArray(t.selected_options,t.toolID,t.questionID)}}})],1)},ae=[],ie=function(){var e=this,t=e._self._c;return t("v-dialog",{style:{zIndex:e.options.zIndex},attrs:{"max-width":e.options.width},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.cancel.apply(null,arguments)}},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t("v-card",[t("v-toolbar",{attrs:{dark:"",color:e.options.color,dense:"",flat:""}},[t("v-toolbar-title",{staticClass:"text-body-2 font-weight-bold black--text"},[e._v(" "+e._s(e.title)+" ")])],1),t("v-card-text",{directives:[{name:"show",rawName:"v-show",value:!!e.message,expression:"!!message"}],staticClass:"pa-4 black--text",domProps:{innerHTML:e._s(e.message)}}),t("v-card-actions",{staticClass:"pt-3"},[t("v-spacer"),e.options.noconfirm?e._e():t("v-btn",{staticClass:"body-2 font-weight-bold",attrs:{color:"grey",text:""},nativeOn:{click:function(t){return e.cancel.apply(null,arguments)}}},[e._v(e._s(e.$t("menus.cancel")))]),t("v-btn",{staticClass:"body-2 font-weight-bold",attrs:{color:"primary",outlined:""},nativeOn:{click:function(t){return e.agree.apply(null,arguments)}}},[e._v("OK")])],1)],1)],1)},oe=[],re={name:"ConfirmDlg",data(){return{dialog:!1,resolve:null,reject:null,message:null,title:null,options:{color:"grey lighten-3",width:400,zIndex:200,noconfirm:!1}}},methods:{open(e,t,s){return this.dialog=!0,this.title=e,this.message=t,this.options=Object.assign(this.options,s),new Promise(((e,t)=>{this.resolve=e,this.reject=t}))},agree(){this.resolve(!0),this.dialog=!1},cancel(){this.resolve(!1),this.dialog=!1}}},ne=re,le=(0,$.Z)(ne,ie,oe,!1,null,null,null),ce=le.exports,de=function(){var e=this,t=e._self._c;return t("div",[t("v-progress-circular",{staticClass:"pointer",attrs:{rotate:e.rotate,size:e.size,width:e.width,color:e.color,value:e.value}},[e._v(" "+e._s(e.value)+" % ")]),t("div",[t("v-chip",{attrs:{"x-small":""}},[t("strong",[e._v(e._s(e.label))])])],1)],1)},ue=[],_e=s(2638),he={props:["in_rotate","in_size","in_width","in_color","in_value","label","actionItem"],data(){return{interval:{},value:this.in_value??0,rotate:this.in_rotate??-90,size:this.in_size??70,width:this.in_width??"7"}},mounted(){},computed:{color(){let e=_e.Z.red.base;switch(!0){case this.value<=10:e=_e.Z.red.base;break;case this.value<=20:e=_e.Z.deepOrange.darken1;break;case this.value<=30:e=_e.Z.orange.accent4;break;case this.value<=40:e=_e.Z.amber.base;break;case this.value<=50:e=_e.Z.yellow.darken1;break;case this.value<=60:e=_e.Z.lime.base;break;case this.value<=70:e=_e.Z.lime.darken2;break;case this.value<=80:e=_e.Z.lime.darken4;break;case this.value<=90:e=_e.Z.lightGreen.darken1;break;case this.value<100:e=_e.Z.green.darken2;break;case 100==this.value:e=_e.Z.indigo.darken4;break;default:e=_e.Z.red.base}return e}},watch:{in_value(e){e>=0&&(this.value=e)},in_size(e){e>=0&&(this.size=e)},in_width(e){e>=0&&(this.width=e)}}},me=he,pe=(0,$.Z)(me,de,ue,!1,null,null,null),ve=pe.exports,ge=function(){var e=this,t=e._self._c;return t("div",[t("v-dialog",{attrs:{width:"500"},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:a}){return[t("v-btn",e._g(e._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",a,!1),s),[e._v(" "+e._s(e.$t("globals.add"))+" "+e._s(e.label)+" ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t("v-card",[t("v-card-title",{staticClass:"text-h5 grey lighten-2"},[e._v(" "+e._s(e.$t("globals.add"))+" "+e._s(e.label)+" ")]),t("v-card-text",[t("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t("v-text-field",{attrs:{counter:e.maxChars,rules:e.nameRules,label:e.$t("active_source.item_name",{item:`${this.label}`}),required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)],1),t("v-divider"),t("v-card-actions",[t("v-spacer"),t("v-btn",{attrs:{color:"primary",text:""},on:{click:e.saveNode}},[e._v(" "+e._s(e.$t("globals.add"))+" ")]),t("v-btn",{attrs:{color:"default",text:""},on:{click:e.cancel}},[e._v(" "+e._s(e.$t("globals.cancel"))+" ")])],1)],1)],1)],1)},we=[],fe={props:["label","network_mode_id"],data(){return{maxChars:55,dialog:!1,valid:!1,name:"",items:[],selected_item:null,nameRules:[e=>!!e||this.$t("rules.field_required"),e=>e&&e.length<=this.maxChars||this.$t("rules.length_max_chars",{max_chars:`${this.maxChars}`})]}},computed:{...(0,r.rn)(g,["logged_user"])},methods:{validate(){return this.$refs.form.validate()},reset(){this.$refs.form.reset()},resetValidation(){this.$refs.form.resetValidation()},saveNode(){if(this.validate()){const e={name_es:this.name,name_en:this.name,user_email:this.logged_user.email,network_mode_id:this.network_mode_id,node_segment_id:4};this.$axios.post("https://oahub.finacanalytics.com/api/v1/node/add",e).then((async e=>{const t=e.data.response;this.$alertify.success(this.$t(e.data.message)),this.reset(),this.resetValidation(),this.$emit("newnode",t)})).catch((e=>{this.$alertify.error(this.$t(e.message)),console.error("There was an error!",e.message),console.error(e),this.reset(),this.resetValidation()})),this.dialog=!1}},cancel(){this.reset(),this.resetValidation(),this.dialog=!1}}},ke=fe,ye=(0,$.Z)(ke,ge,we,!1,null,null,null),$e=ye.exports,be=function(){var e=this,t=e._self._c;return t("div",[t("v-dialog",{attrs:{width:"500"},on:{"click:outside":e.close},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:a}){return[t("v-btn",e._g(e._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",a,!1),s),[e._v(" "+e._s(e.add_button_label)+" ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t("v-card",[t("v-card-title",{staticClass:"text-h5 grey lighten-2"},[e._v(" "+e._s(e.dialog_label)+" ")]),t("v-card-text",[t("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t("v-text-field",{attrs:{label:e.$t("active_source.narrative_title"),rules:e.nameRules},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),t("v-textarea",{attrs:{label:e.$t("active_source.narrative_description"),rules:e.nameRules},model:{value:e.narrative,callback:function(t){e.narrative=t},expression:"narrative"}})],1)],1),t("v-divider"),t("v-card-actions",[t("v-spacer"),t("v-btn",{attrs:{color:"default",text:""},on:{click:e.cancel}},[e._v(" "+e._s(e.$t("globals.cancel"))+" ")]),t("v-btn",{attrs:{color:"primary",text:""},on:{click:e.saveNarrative}},[e._v(" "+e._s(e.button_action_text)+" ")])],1)],1)],1)],1)},xe=[],Se={props:{showNarrativeDialog:{default:!1},mode:String,label:String,network_mode_id:Number,item:Object},data(){return{maxChars:55,valid:!1,title:"",narrative:"",dialog:!1,nameRules:[e=>!!e||this.$t("rules.field_required")]}},watch:{showNarrativeDialog:{handler:function(e){this.dialog=e},immediate:!0},mode:{handler:function(e){"edit"===e&&(this.title=this.item.title,this.narrative=this.item.narrative)},immediate:!0}},computed:{...(0,r.rn)(g,["logged_user","selected_cycle"]),...(0,r.Kc)(g),label_text(){return"create"===this.mode?this.$t("globals.add"):this.$t("globals.edit")},button_action_text(){return"create"===this.mode?this.$t("globals.add"):this.$t("globals.update")},dialog_label(){return this.label_text+" "+this.label},add_button_label(){return this.$t("globals.add")+" "+this.label}},methods:{validate(){return this.$refs.form.validate()},reset(){this.$refs.form.reset()},resetValidation(){this.$refs.form.resetValidation()},saveNarrative(){"create"===this.mode?this.createNarrative():this.updateNarrative()},createNarrative(){if(this.validate()){const e={title:this.title,narrative:this.narrative,cycle_id:this.mainStore.selected_cycle,user_email:this.logged_user.email,network_mode_id:this.network_mode_id};this.$axios.post("https://oahub.finacanalytics.com/api/v1/user/narrative/add",e).then((async e=>{const t=e.data.response;this.$alertify.success(this.$t(e.data.message)),this.$emit("new_narrative",t),this.close()})).catch((e=>{this.$alertify.error(this.$t(e.message)),console.error("There was an error!",e.message),console.error(e),this.close()}))}},updateNarrative(){if(this.validate()){const e={narrative_id:this.item.id,title:this.title,narrative:this.narrative,cycle_id:this.mainStore.selected_cycle,user_email:this.logged_user.email,network_mode_id:this.network_mode_id};this.$axios.post("https://oahub.finacanalytics.com/api/v1/user/narrative/update",e).then((async t=>{this.$alertify.success(this.$t(t.data)),this.$emit("narrative_updated",e),this.close()})).catch((e=>{this.$alertify.error(this.$t(e.message)),console.error("There was an error!",e.message),console.error(e),this.close()}))}},close(){this.reset(),this.resetValidation(),this.$emit("close"),this.dialog=!1},cancel(){this.close()}}},Ne=Se,Ce=(0,$.Z)(Ne,be,xe,!1,null,null,null),qe=Ce.exports,Ae=function(){var e=this,t=e._self._c;return t("div",[t("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid_form,callback:function(t){e.valid_form=t},expression:"valid_form"}},[t("v-dialog",{attrs:{"max-width":"800px"},on:{"click:outside":e.close},model:{value:e.openDialog,callback:function(t){e.openDialog=t},expression:"openDialog"}},[t("v-card",{staticClass:"mx-auto"},[t("v-card-title",[t("span",{staticClass:"headline"},[e._v(e._s(e.$t("active_source.usage_options")))])]),t("v-card-text",[t("v-container",{attrs:{"grid-list-md":""}},e._l(e.usageOptions,(function(s,a){return t("v-checkbox",{key:a,attrs:{value:s["id"],label:s[`name_${e.$i18n.locale}`]},model:{value:e.selected_options,callback:function(t){e.selected_options=t},expression:"selected_options"}})})),1)],1),t("v-card-actions",[t("v-spacer"),t("v-btn",{attrs:{color:"blue",dark:""},on:{click:e.close}},[e._v(e._s(e.$t("globals.cancel")))]),t("v-btn",{attrs:{color:"success"},nativeOn:{click:function(t){return e.saveSelectedOptions.apply(null,arguments)}}},[e._v(e._s(e.$t("globals.select")))])],1)],1)],1)],1)],1)},Oe=[],Te={name:"UsageOptionsDialog",props:["showDialog","usageOptions","toolID","questionID","defaultOptions"],data:()=>({openDialog:!1,valid_form:!1,selected_options:[]}),mounted(){},watch:{showDialog:{handler:function(e){this.openDialog=e}},defaultOptions:{handler:function(e){this.selected_options=e}}},computed:{},methods:{close(){this.openDialog=!1,this.selected_options=[],this.$emit("close")},clear(){this.$refs.form.reset(),this.selected_options=[]},saveSelectedOptions(){const e={selected_options:this.selected_options,toolID:this.toolID,questionID:this.questionID};this.$emit("usageOptionsSelected",e),this.close()}}},Ie=Te,De=(0,$.Z)(Ie,Ae,Oe,!1,null,null,null),je=De.exports,Fe={components:{ConfirmationDialog:ce,Gauge:ve,AddNode:$e,AddNarrative:qe,UsageOptionsDialog:je},data(){return{selected_actors:[],selected_tools:[],narratives:[],user_tools:[],selected_options:[],selected_network:null,selected_area:null,selected_node_segment_category:null,selected_network_mode_theme:null,questions:[],answers:{},nodes:[],current_network_mode:null,formClosed:!1,adjacency_input_forms:[],forms:[],openUsageOptionsDialog:!1,toolOptions:[],toolID:null,questionID:null,showNarrativeDialog:!1,narrativeDialogMode:"create",narrativeItem:null,selRules:[e=>e&&e.length<=2||"Máximo 2 opciones!! ${v.length}"],defaultActorsHeader:[{text:"Nombre",align:"start",value:"username",class:"white--text"},{text:"Area",value:"id_organization_area",class:"white--text"},{text:"Acciones",class:"white--text",sortable:!1}],defaultNodesHeader:[{text:"Nombre",align:"start",value:"name",class:"white--text"},{text:"Acciones",class:"white--text",sortable:!1}],defaultToolsHeader:[{text:"Herramienta",align:"start",value:"username",class:"white--text"},{text:"Acciones",class:"white--text",align:"end",sortable:!1}],defaultNarrativesHeader:[{text:"Título",align:"start",value:"title",class:"white--text"},{text:"Narrativa",align:"start",value:"narrative",class:"white--text"},{text:"Acciones",class:"white--text",align:"end",sortable:!1}]}},mounted(){this.initialize()},watch:{selected_cycle(e){null==e?this.resetSelectedVariables():this.initialize()}},computed:{...(0,r.rn)(g,["selected_cycle"]),...(0,r.Kc)(g),current_adjacency_input_form_id(){let e=null;return this.current_network_mode&&this.mainStore.selected_cycle&&this.mainStore.logged_user&&(e=`${this.mainStore.selected_cycle}-${this.mainStore.logged_user.id}-${this.current_network_mode.id_network_mode}`),e},currentForm(){if(this.forms.length&&this.current_adjacency_input_form_id){const e=this.forms.filter((e=>e.id_adjacency_input_form==this.current_adjacency_input_form_id));if(e.length)return e[0]}return null},interactingPeopleIds(){return this.selected_actors?this.selected_actors.map((e=>e.id)):[]},filteredNodes(){return this.nodes.filter((e=>e.id_employee==this.mainStore.logged_user.id||null==e.id_employee))},filteredEmployees(){return this.selected_area?this.mainStore.employees.filter((e=>e.id_organization_area===this.selected_area)):null},filteredQuestions(){return this.selected_network&&"explora"==this.selected_network.code&&this.questions.length>0?this.questions.filter((e=>!e.question_possible_answers.use_external_source)):[]},externalSourceQuestion(){if(this.selected_network&&"explora"==this.selected_network.code&&this.questions.length>0){const e=this.questions.find((e=>e.question_possible_answers.use_external_source));return e}return null},filteredNetwokModeThemes(){if(this.selected_network){let e=this.mainStore.network_modes.filter((e=>e.id_network===this.selected_network.id&&e.network_mode_theme));return e&&e.length?e.map((e=>e.network_mode_theme)):null}return null},tableActorsHeader(){return this.makeActorsTableHeader(this.questions,this.defaultActorsHeader,this.$t("active_source.question"))},tableNodesHeader(){return this.makeNodesTableHeader(this.questions,this.defaultNodesHeader,this.$t("active_source.question"))},tableToolsHeader(){return this.makeToolsTableHeader(this.questions,this.defaultToolsHeader)}},methods:{async removeToolsIfDeselected(){const e=this.getSavedToolsIds(),t=this.selected_tools.map((e=>e.id)),s=e.filter((e=>!t.includes(e)))[0];s&&(await this.$refs.confirmDeleteActor.open(this.$t("menus.delete_record_title"),this.$t("alerts.delete_tool_text",{item:this.selected_network[`name_${this.$i18n.locale}`]}),{color:"red lighten-3"})?await this.deleteSelectedTool(s,!1):this.selected_tools.push(this.user_tools.filter((e=>e.id==s))[0]))},deleteSelectedOption(e,t,s,a){this.answers[`${e}_${t}_${s}`].splice(a,1),this.saveAnswersArray(this.answers[`${e}_${t}_${s}`],s,t)},getSavedSelectedTools(){const e=this.getSavedToolsIds();if(e.length>0){let t=[];return e.forEach((e=>t.push(this.user_tools.filter((t=>t.id==e))[0]))),t}return[]},getSavedToolsIds(){if(Object.keys(this.answers).length>0){const e=this.mainStore.network_modes.filter((e=>"explora"===e.network.code))[0];return[...new Set(Object.keys(this.answers).filter((t=>t.split("_")[0]==e.id_network_mode)).map((e=>parseInt(e.split("_")[2]))))]}return[]},showUsageOptionsDialog(e,t){e&&e.options.length>0&&(this.toolOptions=e.options,this.toolID=e.id,this.questionID=t,this.current_network_mode&&(this.selected_options=this.answers[`${this.current_network_mode.id_network_mode}_${t}_${e.id}`]??[])),this.openUsageOptionsDialog=!0},closeUsageOptionsDialog(){this.openUsageOptionsDialog=!1,this.toolOptions=[],this.selected_options=[]},closeNarrativeDialog(){this.showNarrativeDialog=!1,this.narrativeDialogMode="create",this.narrativeItem=null},refreshNodes(e){this.nodes=e,this.updateNetworkModeGauge(this.current_network_mode)},addNarrative(e){this.narratives.push(e),this.updateNetworkModeGauge(this.current_network_mode)},updateNarrative(e){const t=this.narratives.findIndex((t=>t.id==e.narrative_id));this.narratives[t]["title"]=e.title,this.narratives[t]["narrative"]=e.narrative},setSelectedNetworkAndTheme(e){this.selected_network=e.network_mode.network,"actor"==this.selected_network.code?this.selected_network_mode_theme=e.network_mode.network_mode_theme.id_network_mode_theme:this.selected_network_mode_theme=null,this.getData()},getFormSectionName(e,t){return e&&e.network?e.network_mode_theme?e.network[`name_${t}`]+"-"+e.network_mode_theme[`Network_mode_theme_${t}`]:e.network[`name_${t}`]:""},saveAnswersArray(e,t,s){this.answers[`${this.current_network_mode.id_network_mode}_${s}_${t}`]?this.answers[`${this.current_network_mode.id_network_mode}_${s}_${t}`]=e:this.$set(this.answers,`${this.current_network_mode.id_network_mode}_${s}_${t}`,e);const a={cycle_id:this.mainStore.selected_cycle,user_email:this.mainStore.logged_user.email,item_id:t,question_id:s,network_mode_id:this.current_network_mode.id_network_mode,selected_option:e};this.$axios.post("https://oahub.finacanalytics.com/api/v1/save_answer",a).then((async e=>{this.populateAnswers(e.data.responses),this.updateNetworkModeGauge(this.current_network_mode)})).catch((e=>{this.$alertify.error(this.$t(e.message)),console.error("There was an error!",e.message),console.error(e)}))},updateNetworkModeGauge(e){const t=this.forms.findIndex((t=>t.id==e.id_network_mode));if(["actor","resource","educ_model","explora"].includes(e.network.code)){const s=e.id_network_mode+"_",a=Object.keys(this.answers).filter((e=>e.startsWith(s))).length;this.forms[t]["answers"]=a}else"narrative"==e.network.code&&(this.forms[t]["answers"]=this.narratives.length);"actor"==e.network.code?this.forms[t]["total_items"]=this.selected_actors.length>0?this.selected_actors.length:1:["resource","educ_model"].includes(e.network.code)?this.forms[t]["total_items"]=this.filteredNodes.length>0?this.filteredNodes.length:1:"explora"==e.network.code?this.forms[t]["total_items"]=this.selected_tools.length>0?this.selected_tools.length:1:"narrative"==e.network.code&&(this.forms[t]["total_items"]=this.narratives.length>0?this.narratives.length:1)},updateAllActorNetworkModeGauges(){this.mainStore.network_modes.forEach((e=>{"actor"==e.network.code&&this.updateNetworkModeGauge(e)}))},makeActorsTableHeader(e,t,s){let a=Object.assign([],t);return e&&e.length>0&&e.forEach(((e,t)=>{a.splice(2+t,0,{text:`${s} ${t+1}`,align:"center",class:"white--text",sortable:!1})})),a[0].text=this.$t("active_source.actor_table.name"),a[1].text=this.$t("active_source.actor_table.area"),a[a.length-1].text=this.$t("active_source.actor_table.actions"),a},makeNodesTableHeader(e,t,s){let a=Object.assign([],t);return e&&e.length>0&&e.forEach(((e,t)=>{a.splice(1+t,0,{text:`${s} ${t+1}`,align:"center",class:"white--text",sortable:!1})})),a[0].text=this.selected_network[`name_${this.$i18n.locale}`],a},makeToolsTableHeader(e,t){let s=Object.assign([],t);return e&&e.length>0&&e.forEach(((e,t)=>{s.splice(1+t,0,{text:e[`Question_${this.$i18n.locale}`],align:"center",class:"white--text",sortable:!1})})),s[0].text=this.$t("active_source.tools"),s[s.length-1].text=this.$t("active_source.actor_table.actions"),s},sortSelectedColleagues(){this.selected_actors.sort(((e,t)=>e.username.toLowerCase()<t.username.toLowerCase()?-1:t.username.toLowerCase()>e.username.toLowerCase()?1:0))},async toggleOpenCloseCurrentForm(){const e={closed:this.currentForm.is_concluded,id_adjacency_input_form:this.currentForm.id_adjacency_input_form,user:JSON.stringify(this.mainStore.logged_user)};await this.$axios.post("https://oahub.finacanalytics.com/api/v1/open_close_adjacency_input_form",e).then((e=>{this.$alertify.success(this.$t(e.data))})).catch((e=>{console.error("There was an error!",e.message)}))},async addInteractingActor(){const e={user_email:this.mainStore.logged_user.email,employee_ids:this.interactingPeopleIds,cycle_id:this.mainStore.selected_cycle};await this.$axios.post("https://oahub.finacanalytics.com/api/v1/add_interacting_actor",e).then((e=>{this.$alertify.success(this.$t(e.data)),this.updateAllActorNetworkModeGauges()})).catch((e=>{console.error("There was an error!",e.message)})),this.sortSelectedColleagues()},async delRecord(e,t,s,a,i){await this.$refs.confirmDeleteActor.open(this.$t(t),this.$t(s,{item:a}),{color:"red lighten-3"})&&("Actor"==i?await this.deleteActor(e):"Node"==i?await this.deleteNode(e):"Explora"==i?await this.deleteSelectedTool(e,!0):"Narrative"==i&&await this.deleteNarrative(e,!0))},editNarrative(e){this.narrativeDialogMode="edit",this.narrativeItem=e,this.showNarrativeDialog=!0},async deleteNarrative(e,t){let s=null;t&&(s=this.narratives.findIndex((t=>t.id==e)));const a={user_email:this.mainStore.logged_user.email,item_id:e,cycle_id:this.mainStore.selected_cycle,network_mode_id:this.current_network_mode.id_network_mode};await this.$axios.delete("https://oahub.finacanalytics.com/api/v1/user/narrative/delete",{data:a}).then((async e=>{this.$alertify.success(this.$t(e.data,{item:this.selected_network[`name_${this.$i18n.locale}`]})),t&&this.narratives.splice(s,1),this.updateNetworkModeGauge(this.current_network_mode)})).catch((e=>{console.error("There was an error!",e.message)}))},async deleteSelectedTool(e,t){let s=null;t&&(s=this.selected_tools.findIndex((t=>t.id==e)));const a={user_email:this.mainStore.logged_user.email,item_id:e,cycle_id:this.mainStore.selected_cycle,network_mode_id:this.current_network_mode.id_network_mode};await this.$axios.delete("https://oahub.finacanalytics.com/api/v1/selected_tool",{data:a}).then((async e=>{this.$alertify.success(this.$t(e.data.message,{item:this.selected_network[`name_${this.$i18n.locale}`]})),t&&this.selected_tools.splice(s,1),await this.getUserResponses(),this.updateNetworkModeGauge(this.current_network_mode)})).catch((e=>{console.error("There was an error!",e.message)}))},async deleteNode(e){const t=this.nodes.findIndex((t=>t.id_node==e)),s={user_email:this.mainStore.logged_user.email,item_id:e,cycle_id:this.mainStore.selected_cycle,network_mode_id:this.current_network_mode.id_network_mode};await this.$axios.delete("https://oahub.finacanalytics.com/api/v1/node",{data:s}).then((async e=>{this.$alertify.success(this.$t(e.data.message,{item:this.selected_network[`name_${this.$i18n.locale}`]})),this.nodes.splice(t,1),await this.getUserResponses(),this.updateNetworkModeGauge(this.current_network_mode)})).catch((e=>{console.error("There was an error!",e.message)}))},async deleteActor(e){const t=this.selected_actors.findIndex((t=>t.id==e)),s={user_email:this.mainStore.logged_user.email,item_id:e,cycle_id:this.mainStore.selected_cycle,network_id:this.selected_network.id};await this.$axios.delete("https://oahub.finacanalytics.com/api/v1/delete_interacting_actor",{data:s}).then((async e=>{this.$alertify.success(this.$t(e.data)),this.selected_actors.splice(t,1),await this.getUserResponses(),this.updateAllActorNetworkModeGauges()})).catch((e=>{console.error("There was an error!",e.message)}))},resetSelectedVariables(){this.selected_area=null,this.mainStore.selected_cycle=null,this.selected_actors=null,this.selected_network=null,this.selected_node_segment_category=null,this.selected_network_mode_theme=null,this.questions=[],this.nodes=[],this.current_network_mode=null,this.answers=[],this.mainStore.network_modes=[],this.forms=[],this.selected_tools=[],this.selected_options=[],this.user_tools=[]},clearVariables(){this.questions=[],this.selected_network_mode_theme=null,this.current_network_mode=null,this.nodes=[],this.selected_tools=[],this.selected_options=[],this.user_tools=[]},async getNodes(e){if(e){const t=await this.$axios.get("https://oahub.finacanalytics.com/api/v1/network_mode/"+e+"/nodes");this.nodes=t.data}},async getActors(){await this.$axios.get("https://oahub.finacanalytics.com/api/v1/user/"+this.mainStore.logged_user.id+"/cycle/"+this.mainStore.selected_cycle+"/interacting_actors").then((e=>{const t=e.data;this.selected_actors=this.mainStore.employees.filter((e=>t.includes(e.id)))})).catch((e=>{console.error("There was an error!",e.message)}))},async getUserResponses(){await this.$axios.get("https://oahub.finacanalytics.com/api/v1/user/"+this.mainStore.logged_user.id+"/cycle/"+this.mainStore.selected_cycle+"/responses").then((e=>{const t=e.data;this.extractAjacencyInputForms(t),this.populateAnswers(t)})).catch((e=>{console.error("There was an error!",e.message)}))},async getUserAdjancencyInputForms(){await this.$axios.get("https://oahub.finacanalytics.com/api/v1/user/"+this.mainStore.logged_user.id+"/cycle/"+this.mainStore.selected_cycle+"/adjacency_input_forms").then((e=>{this.adjacency_input_forms=e.data})).catch((e=>{console.error("There was an error!",e.message)}))},extractAjacencyInputForms(e){if(this.adjacency_input_forms=[],e.length>0){const t=[...new Map(e.map((e=>[e.id_adjacency_input_form,e.adjacency_input_form]))).values()];this.adjacency_input_forms=t}},populateAnswers(e){e.length&&(this.answers={},e.forEach((e=>{const t=JSON.parse(e.Response);t.forEach((t=>{this.$set(this.answers,`${e.adjacency_input_form["id_network_mode"]}_${e.id_question}_${t.item_id}`,t.valor)}))})))},async getNetworkModeQuestions(e){if(e){const t=await this.$axios.get("https://oahub.finacanalytics.com/api/v1/network_mode/"+e+"/questions");return t.data}},getCurrentNetworkMode(){let e=[];return this.selected_network&&this.filteredNetwokModeThemes?this.selected_network_mode_theme&&(e=this.mainStore.network_modes.filter((e=>e.id_network===this.selected_network.id&&e.id_network_mode_theme===this.selected_network_mode_theme))[0]):this.selected_network&&null===this.filteredNetwokModeThemes&&(e=this.mainStore.network_modes.filter((e=>e.id_network==this.selected_network.id))[0]),e},async getQuestions(){this.questions=[],this.current_network_mode=this.getCurrentNetworkMode(),this.current_network_mode&&(this.questions=await this.getNetworkModeQuestions(this.current_network_mode.id_network_mode))},async getUserTools(){const e=await this.$axios.get("https://oahub.finacanalytics.com/api/v1/datawise/user_tools");this.user_tools=e.data},async getUserNarratives(){const e=await this.$axios.get("https://oahub.finacanalytics.com/api/v1/user/"+this.mainStore.logged_user.id+"/cycle/"+this.mainStore.selected_cycle+"/narratives");this.narratives=e.data},async getData(){this.selected_network&&"narrative"!==this.selected_network.code&&await this.getQuestions(),this.selected_network&&["resource","educ_model"].includes(this.selected_network.code)&&await this.getNodes(this.current_network_mode.id_network_mode),this.selected_network&&"explora"===this.selected_network.code&&0==this.user_tools.length&&(await this.getUserTools(),this.selected_tools=this.getSavedSelectedTools()),this.selected_network&&"narrative"===this.selected_network.code&&(this.current_network_mode=this.getCurrentNetworkMode(),await this.getUserNarratives())},async createFormsDetails(){this.mainStore.network_modes.length&&(this.forms=[],this.mainStore.network_modes.forEach((async e=>{let t={};t["network_mode"]=e,t["id"]=e.id_network_mode,t["name_es"]=this.getFormSectionName(e,"es"),t["name_en"]=this.getFormSectionName(e,"en");const s=await this.getNetworkModeQuestions(e.id_network_mode);if(["resource","educ_model"].includes(e.network.code))await this.getNodes(e.id_network_mode),t["total_items"]=this.filteredNodes.length;else if("actor"==e.network.code)t["total_items"]=this.selected_actors.length>0?this.selected_actors.length:1;else if("explora"==e.network.code){const e=this.getSavedToolsIds();t["total_items"]=e.length>0?e.length:1}else"narrative"==e.network.code&&(t["total_items"]=this.narratives.length>0?this.narratives.length:1);if("narrative"!==e.network.code){const a=e.id_network_mode+"_",i=Object.keys(this.answers).filter((e=>e.startsWith(a))).length;t["answers"]=i,t["total_questions"]=s.length}else t["total_questions"]=1,t["answers"]=this.narratives.length;const a=this.adjacency_input_forms.filter((t=>t.id_network_mode==e.id_network_mode))[0];t["id_adjacency_input_form"]=a?a.id_adjacency_input_form:`${this.mainStore.selected_cycle}-${this.mainStore.logged_user.id}-${e.id_network_mode}`,t["is_concluded"]=!!a&&a.Is_concluded,this.forms.push(t)})))},async initialize(){this.mainStore.selected_cycle&&(await this.getActors(),await this.mainStore.getNetworkModes(this.mainStore.selected_cycle),await this.getUserResponses(),await this.createFormsDetails(),await this.getUserNarratives())}}},Me=Fe,Ee=(0,$.Z)(Me,se,ae,!1,null,null,null),Le=Ee.exports,Ue=function(){var e=this,t=e._self._c;return t("v-container",{staticClass:"px-10",attrs:{fluid:""}},[t("br"),t("v-row",[t("v-col",{staticClass:"d-flex justify-space-around mb-6 align-end",attrs:{cols:"2"}},[t("v-select",{attrs:{items:e.filteredCycles,label:e.$t("globals.period"),"item-text":`Cycle_${e.$i18n.locale}`,"item-value":"id_cycle",clearable:"",dense:""},model:{value:e.selected_cycle,callback:function(t){e.selected_cycle=t},expression:"selected_cycle"}})],1),e.selected_cycle?t("v-col",{staticClass:"d-flex justify-space-around mb-6 align-end",attrs:{cols:"3"}},[t("v-select",{attrs:{items:e.themes,label:e.$t("culture.themes"),"item-text":`Culture_mode_theme_${e.$i18n.locale}`,"item-value":"id","return-object":"",clearable:"",dense:""},on:{change:e.getThemeQuestions},model:{value:e.selected_theme,callback:function(t){e.selected_theme=t},expression:"selected_theme"}})],1):e._e()],1),e.selected_cycle&&e.themes.length&&Object.keys(e.totals).length?t("v-row",e._l(e.themes,(function(s,a){return t("v-col",{key:a,attrs:{cols:"2"}},[t("progress-bars",{attrs:{name:s?s[`Culture_mode_theme_${e.$i18n.locale}`]:"",now:s?e.totals[`${e.selected_cycle}_${s.id}`]["now"]:0,preferred:s?e.totals[`${e.selected_cycle}_${s.id}`]["preferred"]:0,"is-selected":e.selected_theme&&s.id==e.selected_theme.id},nativeOn:{click:function(t){return e.setSelectedTheme(s)}}})],1)})),1):e._e(),t("v-row",[t("v-col",[e.selected_theme?t("v-card",[t("v-toolbar",{attrs:{color:"primary",dark:""}},[t("v-toolbar-title",[t("h3",[e._v(e._s(e.selected_theme[`Questions_prefix_${e.$i18n.locale}`]))])]),t("v-spacer")],1),t("v-data-table",{attrs:{headers:e.headers,items:e.questions,"hide-default-header":"","hide-default-footer":"",dense:""},scopedSlots:e._u([{key:"body.prepend",fn:function(){return[t("tr",[t("td"),t("td",{attrs:{width:"150px"}},[t("div",{staticClass:"d-flex align-center justify-center"},[t("h3",[e._v(e._s(e.$t("culture.now")))])])]),t("td",{attrs:{width:"150px"}},[t("div",{staticClass:"d-flex align-center justify-center"},[t("h3",[e._v(e._s(e.$t("culture.preferred")))])])])])]},proxy:!0},{key:"item",fn:function({item:s}){return[t("tr",[t("td",[t("h3",[e._v(e._s(s[`Culture_mode_theme_question_${e.$i18n.locale}`]))])]),t("td",{attrs:{width:"150px"}},[t("div",{staticClass:"d-flex align-center"},[e.answers[`${e.selected_cycle}_${e.selected_theme.id}_${s.id}`]?t("vuetify-money",{staticClass:"centered-input text--darken-3 mt-8",attrs:{options:e.integerOptions,solo:"",errorMessages:parseInt(e.answers[`${e.selected_cycle}_${e.selected_theme.id}_${s.id}`]["now"])>100?`${e.$t("alerts.limit_value_is")} ${e.integerOptions.max} !`:""},model:{value:e.answers[`${e.selected_cycle}_${e.selected_theme.id}_${s.id}`]["now"],callback:function(t){e.$set(e.answers[`${e.selected_cycle}_${e.selected_theme.id}_${s.id}`],"now",t)},expression:"answers[`${selected_cycle}_${selected_theme.id}_${item.id}`]['now']"}}):e._e()],1)]),t("td",{attrs:{width:"150px"}},[t("div",{staticClass:"d-flex align-center"},[e.answers[`${e.selected_cycle}_${e.selected_theme.id}_${s.id}`]?t("vuetify-money",{staticClass:"centered-input text--darken-3 mt-8",attrs:{options:e.integerOptions,solo:"",errorMessages:parseInt(e.answers[`${e.selected_cycle}_${e.selected_theme.id}_${s.id}`]["preferred"])>100?`${e.$t("alerts.limit_value_is")} ${e.integerOptions.max} !`:""},model:{value:e.answers[`${e.selected_cycle}_${e.selected_theme.id}_${s.id}`]["preferred"],callback:function(t){e.$set(e.answers[`${e.selected_cycle}_${e.selected_theme.id}_${s.id}`],"preferred",t)},expression:"answers[`${selected_cycle}_${selected_theme.id}_${item.id}`]['preferred']"}}):e._e()],1)])])]}},{key:"body.append",fn:function(){return[t("tr",[t("td",[t("div",{staticClass:"d-flex justify-end align-center"},[t("h2",[e._v("TOTAL")])])]),t("td",{attrs:{width:"150px"}},[t("div",{staticClass:"d-flex justify-center align-center"},[t("h2",[e._v(e._s(e.total_sums["now"]))])]),e.total_sums["now"]>100?t("span",{staticStyle:{color:"red"}},[e._v(e._s(e.$t("alerts.sum_limit")))]):e._e()]),t("td",{attrs:{width:"150px"}},[t("div",{staticClass:"d-flex justify-center align-center"},[t("h2",[e._v(e._s(e.total_sums["preferred"]))])]),e.total_sums["preferred"]>100?t("span",{staticStyle:{color:"red"}},[e._v(e._s(e.$t("alerts.sum_limit")))]):e._e()])])]},proxy:!0}],null,!1,956628182)})],1):e._e()],1)],1)],1)},Pe=[],Ze={data:()=>({persistentHint:!0,percentPrecision:1,percentSeparator:{decimalSeparator:","},integerOptions:{locale:"es-CO",prefix:"",suffix:"",length:3,precision:0,valueWhenIsEmpty:0,min:0,max:100}})},ze=function(){var e=this,t=e._self._c;return t("div",[t("v-progress-linear",{staticClass:"pointer",class:100!=e.now?"red--text":e.isSelected?"white--text":"black--text",attrs:{color:e.isSelected?"light-blue darken-4":"light-blue",height:e.isSelected?30:18,value:e.now,striped:""}},[t("strong",[e._v(e._s(e.now))])]),t("br"),t("v-progress-linear",{staticClass:"pointer",class:100!=e.preferred?"red--text":e.isSelected?"white--text":"black--text",attrs:{color:e.isSelected?"light-green darken-4":"light-green",height:e.isSelected?30:18,value:e.preferred,striped:""}},[t("strong",[e._v(e._s(e.preferred))])]),e.isSelected?t("strong",[e._v(e._s(e.name))]):t("div",[e._v(" "+e._s(e.name)+" ")])],1)},He=[],Re={props:["name","now","preferred","isSelected"]},Ve=Re,Qe=(0,$.Z)(Ve,ze,He,!1,null,null,null),Be=Qe.exports,Ge={components:{ProgressBars:Be},mixins:[Ze],data(){return{selected_mode:1,selected_theme:null,questions:[],themes:[],answers:{},totals:{},headers:[{text:"",align:"start",value:"Pregunta"},{text:"Ahora",value:"",align:"center",width:"50px"},{text:"Preferido",value:"",align:"center",width:"50px"}]}},mounted(){this.initialize()},watch:{total_sums:{handler(e){e&&(e["now"]||e["preferred"])&&(100!=e["now"]||100!=e["preferred"]||e["now"]==this.totals[`${this.selected_cycle}_${this.selected_theme.id}`]["now"]&&e["preferred"]==this.totals[`${this.selected_cycle}_${this.selected_theme.id}`]["preferred"]||this.saveCultureAnswers(),this.totals[`${this.selected_cycle}_${this.selected_theme.id}`]?this.totals[`${this.selected_cycle}_${this.selected_theme.id}`]=Object.assign({},e):this.$set(this.totals,`${this.selected_cycle}_${this.selected_theme.id}`,e))}},selected_cycle(e){null==e?this.resetSelectedVariables():this.initialize()}},computed:{...(0,r.Ah)(g,["selected_cycle"]),...(0,r.rn)(g,["logged_user","filteredCycles"]),total_sums(){let e={now:0,preferred:0};return this.questions&&this.answers&&this.questions.forEach((t=>{this.selected_cycle&&this.selected_theme&&this.answers[`${this.selected_cycle}_${this.selected_theme.id}_${t.id}`]&&(e["now"]+=Number.parseInt(this.answers[`${this.selected_cycle}_${this.selected_theme.id}_${t.id}`]["now"]),e["preferred"]+=Number.parseInt(this.answers[`${this.selected_cycle}_${this.selected_theme.id}_${t.id}`]["preferred"]))})),e}},methods:{initTotals(){this.themes.forEach((e=>{this.totals[`${this.selected_cycle}_${e.id}`]||this.$set(this.totals,`${this.selected_cycle}_${e.id}`,{now:0,preferred:0})})),this.getUserModeThemesTotals(this.logged_user.id,this.selected_cycle,this.selected_mode)},saveCultureAnswers(){let e=[];this.questions.forEach((t=>{const s={question_id:t.id,now:this.answers[`${this.selected_cycle}_${this.selected_theme.id}_${t.id}`]["now"],preferred:this.answers[`${this.selected_cycle}_${this.selected_theme.id}_${t.id}`]["preferred"]};e.push(s)}));const t={cycle_id:this.selected_cycle,mode_id:this.selected_mode,theme_id:this.selected_theme.id,answers:e,user_email:this.logged_user.email};this.$axios.post("https://oahub.finacanalytics.com/api/v1/culture/save_answers",t).then((async e=>{this.$alertify.success(this.$t(e.data.message))})).catch((e=>{this.$alertify.error(this.$t(e.message)),console.error("There was an error!",e.message),console.error(e)}))},setSelectedTheme(e){this.selected_theme=e,this.getThemeQuestions()},resetSelectedVariables(){this.questions=[],this.themes=[],this.selected_theme=null},async initialize(){this.selected_cycle&&(await this.getModeThemes(),this.initTotals())},async getModeThemes(){const e=await this.$axios.get("https://oahub.finacanalytics.com/api/v1/culture/mode/"+this.selected_mode+"/themes");this.themes=e.data},async getThemeQuestions(){if(this.selected_theme){const e=await this.$axios.get("https://oahub.finacanalytics.com/api/v1/culture/theme/"+this.selected_theme.id+"/questions");this.questions=e.data,this.setReactivityInAnswersAndTotalsObjects(this.selected_cycle,this.selected_theme.id,this.questions),this.getUserModeThemeAnswers(this.logged_user.id,this.selected_cycle,this.selected_mode,this.selected_theme.id)}},async getUserModeThemeAnswers(e,t,s,a){e&&t&&s&&a&&this.$axios.get("https://oahub.finacanalytics.com/api/v1/culture/user/"+e+"/cycle/"+t+"/mode/"+s+"/theme/"+a+"/answers").then((async e=>{e.data.length?this.initAnswersArrayWithExistingValues(t,a,e.data):this.$alertify.warning(this.$t(e.data.message))})).catch((e=>{this.$alertify.error(this.$t(e.message))}))},initAnswersArrayWithExistingValues(e,t,s){s.forEach((s=>{this.answers[`${e}_${t}_${s["id_culture_mode_theme_question"]}`]["now"]=s["Actual"],this.answers[`${e}_${t}_${s["id_culture_mode_theme_question"]}`]["preferred"]=s["Preferred"]}))},setReactivityInAnswersAndTotalsObjects(e,t,s){s.forEach((s=>{this.answers[`${e}_${t}_${s.id}`]||this.$set(this.answers,`${e}_${t}_${s.id}`,{now:0,preferred:0})})),this.totals[`${e}_${t}`]||this.$set(this.totals,`${e}_${t}`,{now:0,preferred:0})},async getUserModeThemesTotals(e,t,s){if(e&&t&&s){const a=await this.$axios.get("https://oahub.finacanalytics.com/api/v1/culture/user/"+e+"/cycle/"+t+"/mode/"+s+"/themes_totals");a.data.length&&this.initTotalsArrayWithExistingValues(t,a.data)}},initTotalsArrayWithExistingValues(e,t){t.forEach((t=>{this.totals[`${e}_${t["id_culture_mode_theme"]}`]["now"]=t["Total_actual"],this.totals[`${e}_${t["id_culture_mode_theme"]}`]["preferred"]=t["Total_preferred"]}))}}},We=Ge,Je=(0,$.Z)(We,Ue,Pe,!1,null,"19ef513e",null),Ke=Je.exports,Xe=function(){var e=this,t=e._self._c;return t("v-container",{attrs:{"fill-height":"",fluid:""}},[t("v-layout",{attrs:{"align-center":"","justify-center":""}},[t("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[t("v-card",{staticClass:"elevation-12"},[t("v-img",{attrs:{height:"250px",src:"images/OA-HUB-cropped.png"}},[t("v-app-bar",{attrs:{flat:"",color:"rgba(0, 0, 0, 0)"}})],1),t("v-card-text",[t("v-form",{model:{value:e.valid_form,callback:function(t){e.valid_form=t},expression:"valid_form"}},[t("v-text-field",{attrs:{"prepend-icon":"mdi-email",label:"Email",type:"text",rules:[t=>!!t||e.$t("login.email_required"),t=>/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(t)||e.$t("login.email_not_valid")]},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),t("v-text-field",{attrs:{id:"password","prepend-icon":"mdi-lock",label:e.$t("login.password"),type:e.show?"text":"password","append-icon":e.show?"mdi-eye":"mdi-eye-off",rules:[t=>!!t||e.$t("login.pwd_required"),t=>/^\w(?=.{4,})/.test(t)||e.$t("login.min_pwd")]},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.logIn.apply(null,arguments)},"click:append":function(t){e.show=!e.show}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),t("router-link",{attrs:{to:"forgot-password"}},[e._v(e._s(e.$t("login.forgot_pwd")))])],1)],1),t("v-card-actions",[t("v-spacer"),t("v-btn",{attrs:{color:"primary",disabled:!e.valid_form},on:{click:e.logIn}},[e._v("Login")])],1)],1)],1)],1)],1)},Ye=[],et={data(){return{email:null,password:null,show:!1,valid_form:!1}},computed:{...(0,r.Kc)(g)},methods:{async logIn(){let e={email:this.email,password:this.password};this.mainStore.logIn(e)}}},tt=et,st=(0,$.Z)(tt,Xe,Ye,!1,null,null,null),at=st.exports;const it=(e,t,s)=>{const a=g(te);a.isLoggedIn?s("/login"):s()},ot=(e,t,s)=>{const a=g(te);a.isLoggedIn?s():"/login"!==rt.path&&s("/login")};a["default"].use(Z.ZP);const rt=new Z.ZP({mode:"history",routes:[{path:"/",redirect:"/login"},{path:"/login",name:"Login",component:at,beforeEnter:it},{path:"/forgot-password",name:"forgot-password",component:B,meta:{auth:!1}},{path:"/reset-password/:email/:token",name:"reset-password-form",component:Y,meta:{auth:!1}},{path:"/active_source",name:"ActiveSource",component:Le,beforeEnter:ot},{path:"/culture",name:"Culture",component:Ke,beforeEnter:ot}]});rt.beforeEach(((e,t,s)=>{e.matched.some((e=>e.meta.requiresAuth))&&("undefined"==typeof localStorage.getItem("access_token")||null==localStorage.getItem("access_token"))?s({path:"/login",query:{redirect:e.fullPath}}):s()}));var nt=rt,lt=s(707),ct=s.n(lt),dt=(s(8556),s(2344)),ut=s(4023),_t=s.n(ut),ht=function(){var e=this,t=e._self._c;return t("div",[t("v-text-field",e._b({attrs:{label:e.label,placeholder:e.placeholder,readonly:e.readonly,disabled:e.disabled,outlined:e.outlined,dense:e.dense,"hide-details":e.hideDetails,error:e.error,"error-messages":e.errorMessages,rules:e.rules,clearable:e.clearable,backgroundColor:e.backgroundColor,prefix:e.options.prefix,suffix:e.options.suffix,hint:e.hint,"persistent-hint":e.persistentHint,solo:e.solo},on:{keypress:e.keyPress,blur:e.onBlur},model:{value:e.cmpValue,callback:function(t){e.cmpValue=t},expression:"cmpValue"}},"v-text-field",e.properties,!1))],1)},mt=[],pt={model:{prop:"value",event:"input"},props:{value:{type:[String,Number],default:"0"},label:{type:String,default:""},placeholder:{type:String,default:void 0},readonly:{type:Boolean,default:!1},dense:{type:Boolean,default:!1},error:{type:Boolean,default:!1},hideDetails:{type:[Boolean,String],default:!1},errorMessages:{type:[Array,String],default:()=>[]},rules:{type:[Array,String],default:()=>[]},hint:{type:String,default:""},persistentHint:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},backgroundColor:{type:String,default:"white"},valueWhenIsEmpty:{type:String,default:""},valueOptions:{type:Object,default:function(){return{min:0,minEvent:"SetValueMin"}}},options:{type:Object,default:function(){return{locale:"pt-BR",prefix:"",suffix:"",length:11,precision:2}}},properties:{type:Object,default:function(){return{}}},solo:{type:Boolean,default:!1}},data:()=>({}),computed:{cmpValue:{get:function(){return null!==this.value&&""!==this.value?this.humanFormat(this.value.toString()):this.valueWhenIsEmpty},set:function(e){this.$emit("input",this.machineFormat(e))}}},methods:{humanFormat:function(e){return e=isNaN(e)?"":Number(e).toLocaleString(this.options.locale,{maximumFractionDigits:this.options.precision,minimumFractionDigits:this.options.precision}),e},addsDecimalSeparator(e){if(this.options.precision>0){const t=e.length-parseInt(this.options.precision);e=e.substring(0,t)+"."+e.substring(t,e.length)}return e},machineFormat(e){return e?(e=this.cleanNumber(e),e=e.padStart(parseInt(this.options.precision)+1,"0"),e=this.addsDecimalSeparator(e),isNaN(e)&&(e=this.valueWhenIsEmpty)):e=this.valueWhenIsEmpty,0===this.options.precision&&(e=this.cleanNumber(e)),e},keyPress(e){let t=e.keyCode?e.keyCode:e.which;(t<48||t>57)&&e.preventDefault(),this.hitTargetLength()&&e.preventDefault()},cleanNumber:function(e){let t="";if(e){let a=!1,i=e.toString().split("");for(var s=0;s<i.length;s++)this.isInteger(i[s])&&(a?t+=i[s]:"0"!==i[s]&&(t+=i[s],a=!0))}return""==t&&(t="0"),t},isInteger(e){return Number.isInteger(parseInt(e))},hitTargetLength(){return Number(this.cleanNumber(this.value).length)>=Number(this.options.length)},hitMaxLimit(e){return this.options.max&&Number(e)>Number(this.options.max)},onBlur(){(this.value&&0===this.value.length||parseFloat(this.value)<=this.valueOptions.min)&&this.$emit(this.valueOptions.minEvent||"SetValueMin",this.valueOptions.min),this.valueOptions.max&&parseFloat(this.value)>=this.valueOptions.max&&this.$emit(this.valueOptions.maxEvent||"SetValueMax",this.valueOptions.max)}}},vt=pt,gt=(0,$.Z)(vt,ht,mt,!1,null,null,null),wt=gt.exports;function ft(e){e.component("vuetify-money",wt)}var kt=ft,yt={percent:{decimalDigits:0},currency:{symbol:"$",decimalDigits:0,thousandsSeparator:".",decimalSeparator:",",symbolOnLeft:!0,spaceBetweenAmountAndSymbol:!0,showPlusSign:!1}};a["default"].use(_t(),yt),a["default"].use(dt.Z),a["default"].use(ct()),a["default"].use(kt),te.use((({store:e})=>{e.router=(0,a.markRaw)(nt)})),a["default"].config.productionTip=!1,a["default"].prototype.$axios=l(),window.axios=s(6265),window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",window.axios.interceptors.request.use((e=>{const t=localStorage.getItem("access_token");return t&&(e.headers["x-access-token"]=t),e}),(e=>{Promise.reject(e)})),new a["default"]({vuetify:new(ct())({theme:{dark:!1},lang:{t:(e,...t)=>p.t(e,t)}}),pinia:te,i18n:p,router:nt,render:e=>e(P)}).$mount("#app")},8092:function(e,t,s){var a={"./en.json":790,"./es.json":8563};function i(e){var t=o(e);return s(t)}function o(e){if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=o,e.exports=i,i.id=8092},790:function(e){"use strict";e.exports=JSON.parse('{"menus":{"active_source":"Active source","culture":"Culture","datawise":"Datawise","about":"About","delete_record_title":"Delete record","cancel":"Cancel","loading":"Loading...","delete":"Delete","select_usage_options":"Select usage options"},"globals":{"period":"Period","add":"Add","update":"Update","edit":"Edit","delete":"Delete","cancel":"Cancel","select":"Select"},"active_source":{"area":"Area","questionaire_type":"Type of questionaire","question_theme":"Questions Theme","user":"User","question":"Question","answer":"Answer","section_closed":"Section closed/completed","actor_table":{"name":"Name","area":"Area","actions":"Actions"},"item_name":"{item} name","tools":"Tools","usage_options":"Usage options","narrative_title":"Narrative\'s title","narrative_description":"Narrative\'s text"},"culture":{"themes":"Themes","now":"Now","preferred":"Preferred"},"datawise":{"topics":"Topics","tools":"Tools","info_tool":"Information Tool"},"login":{"email_required":"E-mail is required!","pwd_required":"Password is required!","password":"Password","new_password":"New password","forgot_pwd":"Forgot password?","min_pwd":"Password must be min 5 characters long!","email_not_valid":"Email is not valid!","pwd_not_valid":"Password is not valid!","missing_token":"Missing Token!","invalid_token":"Invalid Token!","missing_credentials":"Missing credentials!","user_not_registered":"User is not registered!","bad_credentials":"Invalid credentials!","confirmation_pwd_not_match":"Confirmation password does not match!","confirmation_password":"Confirmation password","invalid_or_expired_token":"The token is invalid or has already expired! Please login again...","reset_password":{"title":"Reset password...","email_sent":"An email has just been sent to you in order to reset your password!","email_error":"An error occured while trying to send the email!","pwd_reset_successful":"Your password was reset successfully!","send_request":"Send request","change_pwd":"Change password"}},"api_responses":{"item_deleted":"{item} was deleted, answers related to it in other sections may be deleted as well!!","interacting_actor_deleted":"Interacting actor was deleted, as all answers related to it in other sections!!","interacting_actor_not_deleted":"Interacting actor could not be deleted!!","new_interacting_actor_added":"New interacting actor added!","answer_saved":"Your answer has been saved!","form_closed":"Form closed!","form_opened":"Form enabled again!","no_results":"No results found!","data_saved":"Data has been saved!","data_updated":"Data was successfully updated!","data_not_updated":"Data was not updated!","no_adjacency_input_form_found":"Form not found!"},"alerts":{"limit_value_is":"The limit value is","sum_limit":"Sum should be 100!","delete_record_text":"Are you sure you want to delete this record?","delete_interacting_person_text":"Are you sure you want to delete this person?<br> All answers associated to this person in other sections will be deleted!","delete_item_text":"Are you sure you want to delete this {item}?<br> All answers associated to this {item} in other sections will be deleted!","delete_tool_text":"Are you sure you want to delete this {item}?<br> All answers associated to this {item} will be deleted!","delete_narrative_text":"Are you sure you want to delete this {item}?<br> All answers associated to this {item} will be deleted!"},"rules":{"field_required":"Field is required!","length_max_chars":"Length must be less than {max_chars} characters!"}}')},8563:function(e){"use strict";e.exports=JSON.parse('{"menus":{"active_source":"Fuente Activa","culture":"Cultura","datawise":"Datawise","about":"Acerca de..","delete_record_title":"Borrar registro","cancel":"Cancelar","loading":"Cargando...","delete":"Borrar","select_usage_options":"Seleccionar opciones de uso"},"globals":{"period":"Periodo","add":"Agregar","update":"Actualizar","edit":"Editar","delete":"Borrar","cancel":"Cancelar","select":"Seleccionar"},"active_source":{"area":"Area","questionaire_type":"Tipo de Cuestionario","question_theme":"Temáticas de las preguntas","user":"Empleado","question":"Pregunta","answer":"Respuesta","section_closed":"Sección cerrada/completada","actor_table":{"name":"Nombre","area":"Area","actions":"Acciones"},"item_name":"Nombre del {item}","tools":"Herramientas","usage_options":"Opciones de uso","narrative_title":"Título de la Narrativa","narrative_description":"Texto de la Narrativa"},"culture":{"themes":"Temas","now":"Ahora","preferred":"Preferido"},"datawise":{"topics":"Temas","tools":"Herramientas","info_tool":"Herramienta"},"login":{"email_required":"E-mail es requerido!","pwd_required":"Contraseña es requerida!","password":"Contraseña","new_password":"Nueva contraseña","forgot_pwd":"¿Olvidó su contraseña?","min_pwd":"Contraseña debe ser mínimo de 5 caracteres!","email_not_valid":"E-mail no es válido!","pwd_not_valid":"Contraseña no es válida!","missing_token":"Token no está presente!","invalid_token":"Token inválido!","missing_credentials":"Faltan las credenciales!","user_not_registered":"Usuario no está registrado!","bad_credentials":"Credenciales incorrectas!","confirmation_pwd_not_match":"La contraseña de confirmación no coincide!!","confirmation_password":"Confirmación de contraseña","invalid_or_expired_token":"El token es inválido o ya ha expirado! Por favor autentíquese nuevamente...","reset_password":{"title":"Restablecer constraseña...","email_sent":"Un correo ha sido enviado a su cuenta para reestablecer su contraseña!","email_error":"Ocurrió un error en el envío del correo!","pwd_reset_successful":"Su contraseña fue reestablecida con éxito!","send_request":"Enviar solicitud","change_pwd":"Cambiar contraseña"}},"api_responses":{"item_deleted":"{item} fue eliminado, respuestas relacionadas a este en otras secciones podrán ser eliminadas también!!","interacting_actor_deleted":"Actor fue eliminado, así como todas las respuestas relacionadas a este en otras secciones!!","interacting_actor_not_deleted":"Actor no pudo ser eliminado!!","new_interacting_actor_added":"Nuevo actor ha sido agregado!","answer_saved":"Su respuesta ha sido guardada!","form_closed":"Formulario cerrado!","form_opened":"Formulario habilitado nuevamente!","no_results":"No se hallaron resultados!","data_saved":"Los datos han sido guardados!","data_updated":"Los datos fueron actualizados!","data_not_updated":"Los datos pudieron ser actualizados!","no_adjacency_input_form_found":"No existe este formulario!"},"alerts":{"limit_value_is":"El valor límite es","sum_limit":"La suma debe ser igual a 100!","delete_record_text":"Está seguro de eliminar este registro?","delete_interacting_person_text":"Está seguro de eliminar esta persona?<br> Todas las respuestas asociadas a esta persona en otras secciones serán borradas!","delete_item_text":"Está seguro de eliminar este {item}?<br> Todas las respuestas asociadas a este {item} en otras secciones serán borradas!","delete_tool_text":"Está seguro de eliminar este {item}?<br> Todas las respuestas asociadas a este {item} serán borradas!","delete_narrative_text":"Está seguro de eliminar esta {item}?<br> Todas las respuestas asociadas a esta {item} serán borradas!"},"rules":{"field_required":"Campo es requerido!","length_max_chars":"Longitud debe ser inferior a {max_chars} caracteres!"}}')}},t={};function s(a){var i=t[a];if(void 0!==i)return i.exports;var o=t[a]={exports:{}};return e[a].call(o.exports,o,o.exports,s),o.exports}s.m=e,function(){var e=[];s.O=function(t,a,i,o){if(!a){var r=1/0;for(d=0;d<e.length;d++){a=e[d][0],i=e[d][1],o=e[d][2];for(var n=!0,l=0;l<a.length;l++)(!1&o||r>=o)&&Object.keys(s.O).every((function(e){return s.O[e](a[l])}))?a.splice(l--,1):(n=!1,o<r&&(r=o));if(n){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[a,i,o]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var i,o,r=a[0],n=a[1],l=a[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(i in n)s.o(n,i)&&(s.m[i]=n[i]);if(l)var d=l(s)}for(t&&t(a);c<r.length;c++)o=r[c],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(d)},a=self["webpackChunkOA_HUB"]=self["webpackChunkOA_HUB"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(3269)}));a=s.O(a)})();
//# sourceMappingURL=app.4f93e186.js.map